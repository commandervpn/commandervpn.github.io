(this.webpackJsonpramtdapp=this.webpackJsonpramtdapp||[]).push([[0],{707:function(e,t,n){e.exports=n(946)},712:function(e,t,n){},839:function(e,t){},841:function(e,t){},852:function(e,t){},854:function(e,t){},881:function(e,t){},883:function(e,t){},884:function(e,t){},889:function(e,t){},891:function(e,t){},897:function(e,t){},899:function(e,t){},918:function(e,t){},930:function(e,t){},933:function(e,t){},940:function(e,t,n){},946:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),s=(n(712),n(11)),c=n(12),l=n(144),u=n(20),d=n(19),h=n(686),p=n(685),f=n(983),m=n(1011),g=r.a.createContext(null),v=n(993),y=n(992),b=n(1004),w=n(997),k=n(105),E=n(996),S=n(991),x=n(1017),O=n(104),C=n(1012),T=(n(444),n(97)),j=n.n(T),A=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"isOnMobile",value:function(){var e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0),e}},{key:"isOnAndroid",value:function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1}},{key:"isNative",value:function(){return!(!window.Capacitor||!window.Capacitor.platform)}},{key:"helloWorld",value:function(){var e=j()([6.1,4.2,6.3],Math.floor);console.log(e),console.log("Hello World... (^_^)/ !!")}},{key:"hash",value:function(e){var t,n=0;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}},{key:"padnumber",value:function(e,t){var n="          "+e;return n.substr(n.length-t)}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"formatPrice",value:function(e){return(e*=1)>=0?"\xa3"+e.toFixed(2):""}},{key:"sortByKey",value:function(e,t){return e.sort((function(e,n){var a=e[t],r=n[t];return a<r?-1:a>r?1:0}))}},{key:"findByKeyValue",value:function(e,t,n){for(var a=0;a<e.length;a++)if(e[a][t]===n)return e[a]}},{key:"getStackTrace",value:function(){var e={};return Error.captureStackTrace(e,this.getStackTrace),e.stack}},{key:"formatDate",value:function(e,t,n){var a=["\0","January","February","March","April","May","June","July","August","September","October","November","December"],r=["\x01","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["\x02","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["\x03","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function s(e,t){var n=e+"";for(t=t||2;n.length<t;)n="0"+n;return n}var c=n?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var l=(n?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+a[0])).replace(/(^|[^\\])MMM/g,"$1"+r[0])).replace(/(^|[^\\])MM/g,"$1"+s(l))).replace(/(^|[^\\])M/g,"$1"+l);var u=n?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+i[0])).replace(/(^|[^\\])dd/g,"$1"+s(u))).replace(/(^|[^\\])d/g,"$1"+u);var d=n?e.getUTCHours():e.getHours(),h=d>12?d-12:0==d?12:d;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+s(d))).replace(/(^|[^\\])H/g,"$1"+d)).replace(/(^|[^\\])hh+/g,"$1"+s(h))).replace(/(^|[^\\])h/g,"$1"+h);var p=n?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+s(p))).replace(/(^|[^\\])m/g,"$1"+p);var f=n?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+s(f))).replace(/(^|[^\\])s/g,"$1"+f);var m=n?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+s(m,3)),m=Math.round(m/10),t=t.replace(/(^|[^\\])ff/g,"$1"+s(m)),m=Math.round(m/10);var g=d<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+m)).replace(/(^|[^\\])TT+/g,"$1"+g)).replace(/(^|[^\\])T/g,"$1"+g.charAt(0));var v=g.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+v)).replace(/(^|[^\\])t/g,"$1"+v.charAt(0));var y=-e.getTimezoneOffset(),b=n||!y?"Z":y>0?"+":"-";if(!n){var w=(y=Math.abs(y))%60;b+=s(Math.floor(y/60))+":"+s(w)}t=t.replace(/(^|[^\\])K/g,"$1"+b);var k=(n?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(o[0],"g"),o[k])).replace(new RegExp(i[0],"g"),i[k])).replace(new RegExp(a[0],"g"),a[l])).replace(new RegExp(r[0],"g"),r[l])).replace(/\\(.)/g,"$1")}}],[{key:"str",value:function(e){return e?e+"":""}}]),e}();A.instance=A.instance||new A;var M=n(302),F=n.n(M),P=function(){function e(){Object(s.a)(this,e),this.sitekey="",this.site={state:"",registration_pp_plan_id:"",registration_pp_client_id:""},this.auth={},this.siteSubject=new C.a,this.authSubject=new C.a,this.fatalErrorSubject=new C.a,this.toastSubject=new C.a,this.messageBoxSubject=new C.a,this.waitingSubject=new C.a,this.baseApiUrl="https://commandervpn.github.io/api/json",this.baseApiUrls=["https://commandervpn.github.io/api/json","https://commandervpn.github.io/api/json"],this.baseApiUrls2=[],this.resp1=null,"contains"in String.prototype||(String.prototype.contains=function(e,t){return-1!==String.prototype.indexOf.call(this,e,t)})}return Object(c.a)(e,[{key:"checkApiUrls",value:function(){var t=this,n=window.location.hostname,a="https://"+window.location.hostname+"/api/json";"localhost"!==n&&-1===n.indexOf("192.")&&(n.match(/\./g)||[]).length>2&&-1===this.baseApiUrls.indexOf(a)&&this.baseApiUrls.push(a);var r=[],o=function(t){var n=e.instance.baseApiUrls[t];r.push(fetch(n+"/test.txt",{method:"POST"}).then((function(t){e.instance.baseApiUrls2.push(n),console.log("ok",n),t.text()})).catch((function(e){console.log("err",n)})))};for(var i in e.instance.baseApiUrls)o(i);return Promise.all(r).then((function(){0==e.instance.baseApiUrls2.length?setTimeout((function(){e.instance.showToast("Error","Error in connecting to the store")}),5e3):-1===e.instance.baseApiUrls2.indexOf(t.baseApiUrl)&&(e.instance.baseApiUrl=e.instance.baseApiUrls2[0])}))}},{key:"callApi",value:function(e,t){var n=this,a=new URLSearchParams;null==t&&(t={}),t._k=this.sitekey,t._hj=window.hj&&window.hj.globals&&window.hj.globals.get("userId")?window.hj.globals.get("userId"):"",this.isLogin()&&(t._uu=this.auth._u.username,t._ui=this.auth.customerid,t._up=F.a.createHash("md5").update(this.auth._u.pass).digest("hex")),t._t=Date.now()+"";var r=JSON.stringify(t).replace(/"/g,""),o=F.a.createHash("md5").update(r).digest("hex");for(var i in t._h=o,t)a.append(i,t[i]);return fetch(this.baseApiUrl+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded"},body:a}).then((function(e){return e.text()})).then((function(e){return n.resp1=e,JSON.parse(e)}))}},{key:"init",value:function(){var e=this;window.onerror=function(t,n,a,r,o){return e.sendEventLog({data:JSON.stringify({message:{message:t,file:n,line:a,col:r,error:o.message,stack:A.instance.getStackTrace()}}),event:"pageerror"}),!1}}},{key:"catchErrorInApi",value:function(t){var n=t+"",a=this.resp1;n.contains("SSL error")&&(n=A.instance.formatDate(new Date,"yyyy/MM/dd hh:mm:ss Z")+" **THE DATE & TIME ON YOUR PC MAY BE INVALID. UPDATE IT PLEASE** "+n),setTimeout((function(){e.instance.sendEventLog({data:JSON.stringify({err:n,resp:a,stack:t.stack}),event:"apierror"})}),2e3),this.showToast(n,"error","bottom")}},{key:"fetchSiteData",value:function(){var e=this;this.callApi("/settings",{}).then((function(t){e.site=t,e.site.state="fetched",e.siteSubject.next("changed")})).catch((function(t){return e.catchErrorInApi(t)}))}},{key:"logout",value:function(){this.auth={},localStorage.removeItem("auth"),localStorage.removeItem("sitekey"),localStorage.removeItem("cart"),window.location.reload(),this.authSubject.next("logout")}},{key:"sendPassRecoveryCode",value:function(e,t){var n=this;e.recovery=1,this.callApi("/auth",e).then((function(e){console.log(e),e.error?(n.showToast("Password Recovery error "+e.error,"error","bottom"),t(0,e.error)):(n.showToast("Recovery Code sent to your email address","success","bottom"),t(1,"OK"))})).catch((function(e){return n.catchErrorInApi(e)}))}},{key:"changePassword",value:function(e,t){var n=this;e.changepass=1,this.callApi("/auth",e).then((function(e){e.error?(n.showToast(e.error,"error","bottom"),t(0,e.error)):(n.showToast("Your password has been set successfully","success","bottom"),t(1,"OK"))})).catch((function(e){return n.catchErrorInApi(e)}))}},{key:"registerUser",value:function(e,t){var n=this;e.reg=1,this.callApi("/auth",e).then((function(a){console.log(a),a.error?(n.showToast("Register error "+a.error,"error","bottom"),t(0,a.error)):(n.showToast("Registration Successful","success","bottom"),n.checkAuth(e.email,e.password,t))})).catch((function(e){return n.catchErrorInApi(e)}))}},{key:"updateUserProfile",value:function(e,t){var n=this;e.update=1,this.callApi("/auth",e).then((function(a){a.error?(n.showToast("Update error "+a.error,"error","bottom"),t(0,a.error)):(n.showToast("Update Successful","success","bottom"),n.checkAuth(e.email,e.password,t,!0))})).catch((function(e){return console.log(e)}))}},{key:"checkAuth",value:function(e,t,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={email:e,pass:t};this.callApi("/auth",o).then((function(o){console.log(o),o.error?(localStorage.removeItem("auth"),a.showToast("Login error "+o.error,"error","bottom"),n(0,o.error)):(o._u={username:e,pass:t},a.auth=o,localStorage.setItem("auth",JSON.stringify(o)),a.authSubject.next("login"),r||a.showToast("Login Successful","success","bottom"),n(1,"OK"))})).catch((function(e){return a.catchErrorInApi(e)}))}},{key:"fetchOrderHistory",value:function(e){var t=this;this.isLogin()&&this.callApi("/orders",{customerid:this.auth.customerid}).then((function(n){console.log(n),n.error?(t.showToast("Error "+n.error,"error","bottom"),e(0,null)):e(1,n)})).catch((function(e){return t.catchErrorInApi(e)}))}},{key:"getCustomerAddress",value:function(){if(this.isLogin()){var e=A.str(this.auth.firstname)+" "+A.str(this.auth.lastname)+", "+A.str(this.auth.flatnumber)+" "+A.str(this.auth.housenumber)+" "+A.str(this.auth.housename)+" "+A.str(this.auth.street)+", "+A.str(this.auth.town)+", "+A.str(this.auth.postcode);return e=e.replace("  "," ").replace("  "," ").replace("  "," ").replace(",,",",")}return""}},{key:"getOrderId",value:function(e,t){var n=this;e.getorderid=1,e.total=D.instance.totalCartValue,this.callApi("/order",e).then((function(e){e.error?(n.showToast(e.error,"error","bottom"),t(0,e.error)):t(e.orderid,e.error)})).catch((function(e){return n.catchErrorInApi(e)}))}},{key:"completeOrder",value:function(e,t){var n=this,a=e;this.callApi("/register",a).then((function(e){e.orderid&&0!==e.orderid?(D.instance.cartSubject.next(""),t(e.orderid,e.message)):t(0,e.message)})).catch((function(e){return n.catchErrorInApi(e)}))}},{key:"getFoodsOfType",value:function(e){var t=this.foodinfo.types.find((function(t){return t.title===e})).typeid;return this.foodinfo.foods.filter((function(e){return e.typeid===t}))}},{key:"showToast",value:function(e,t,n){this.showWaiting(!1,""),this.toastSubject.next({msg:e,type:t,position:n})}},{key:"showMessageBox",value:function(e,t,n){this.showWaiting(!1,""),this.messageBoxSubject.next({msg:e,title:t,type:n})}},{key:"showWaiting",value:function(e,t){this.waitingSubject.next({msg:t,show:e})}},{key:"isLogin",value:function(){return this.auth&&this.auth.customerid&&""!==this.customerid}},{key:"checkPostCode",value:function(e){e=e.replace(/\s/g,"");return/^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i.test(e)}},{key:"sendEventLog",value:function(e){var t={};for(var n in navigator)t[n]=navigator[n];e._nav=JSON.stringify(t),this.callApi("/eventlog",e).then((function(e){console.log(e)}))}},{key:"addPaypalScript",value:function(){var t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id="+e.instance.site.registration_pp_client_id+"&vault=true&intent=subscription",t.async=!0,t.onerror=function(){var t={stacktrace:A.instance.getStackTrace()};setTimeout((function(){e.instance.sendEventLog({data:JSON.stringify(t),event:"ppjsloaderror"})}),5e3)},document.body.appendChild(t)}},{key:"isTestOrder",value:function(){if(this.isLogin()&&e.instance.auth._u.username){var t=e.instance.auth._u.username.toLowerCase();return["ruzbahan"].filter((function(e){return t.contains(e)})).length>0}return!1}}]),e}();P.instance=P.instance||new P;var D=function(){function e(){Object(s.a)(this,e),this.cart=[],this.deliveryMethod="Delivery",this.paymentMethod="Online",this.totalCartValue=0,this.subtotal=0,this.totalCartFoodCount=0,this.deliveryCharge=0,this.discount=0,this.deliveryAddress={person:"",address1:"",address2:"",postcode:"",city:"",phone:"",addressnote:""},this.simpleProps=["cart","deliveryMethod","paymentMethod","totalCartValue","subtotal","totalCartFoodCount","deliveryCharge","discount","deliveryAddress"],this.cartSubject=new C.a,this.showDialogSubject=new C.a}return Object(c.a)(e,[{key:"clearCart",value:function(){this.cart=[],this.deliveryMethod="Delivery",this.paymentMethod="Online",this.totalCartValue=0,this.subtotal=0,this.totalCartFoodCount=0,this.deliveryCharge=0,this.discount=0,this.deliveryAddress={person:"",address1:"",address2:"",postcode:"",city:"",phone:"",addressnote:""}}},{key:"copyProps",value:function(e,t){for(var n in this.simpleProps)t[this.simpleProps[n]]=e[this.simpleProps[n]]}},{key:"saveToStorage",value:function(){if(this.totalCartFoodCount){var e={};e._t=+new Date,this.copyProps(this,e),localStorage.setItem("cart",JSON.stringify(e))}}},{key:"loadFromStorage",value:function(){var e=localStorage.getItem("cart");if(e){try{e=JSON.parse(e)}catch(t){return localStorage.removeItem("cart"),void(e=null)}+new Date-e._t<9e5?(this.copyProps(e,this),this.cartSubject.next("")):localStorage.removeItem("cart")}}},{key:"addToCart",value:function(e){if(1===e.prices.length){var t=JSON.parse(JSON.stringify(e));t.total=100*t.prices[0].price/100,this.addToCartObject(t)}}},{key:"findToppingPrice",value:function(e,t,n){var a=P.instance.foodinfo.foodtcategory.filter((function(t){return t.foodid===e.foodid})).map((function(e){return e.tcategoryid}));0===a.length&&a.push(-1);var r=e.selectedSize;r||(r=null);var o=null===r?null:r.id,i=n.filter((function(e){return(null===e.tcategoryid||a.includes(e.tcategoryid))&&(null===e.toppingid||e.toppingid===t.toppingid)&&(null===e.sizeid||e.sizeid===o)}));return i.sort().reverse(),i.length>0?[1*i[0].price,t.count]:[0,t.count]}},{key:"changeDeliveryMethod",value:function(e){this.deliveryMethod=e,this.updateTotal()}},{key:"changePaymentMethod",value:function(e){this.paymentMethod=e,this.updateTotal()}},{key:"removeFromCart",value:function(e){var t=this.cart.indexOf(e);t>-1&&(this.cart[t].count>1?this.cart[t].count--:this.cart.splice(t,1),this.updateTotal())}},{key:"findPriceByOptions",value:function(e,t,n,a){var r=this;console.log("FTC: "+a);var o=null;if(t||(t=null),n||(n=null),!e||!e.prices)return null;if(!n&&t&&(o=e.prices.find((function(e){return e.modelid===t.id&&"0"===e.sizeid}))),n&&!t&&(o=e.prices.find((function(e){return e.sizeid===n.id&&"0"===e.modelid}))),t&&n&&(o=e.prices.find((function(e){return e.sizeid===n.id&&e.modelid===t.id}))),1===e.prices.length&&(o=e.prices[0]),!e.prices||0===e.prices.length)return P.instance.showMessageBox("Error adding food to basket","Error",""),9999;e.toppings&&e.toppings.forEach((function(e){"count"in e||(e.count=1*e.checked)}));var i=e.toppings?e.toppings.filter((function(e){return 1*e.checked===1&&0===e.count})).map((function(e){return"-".concat(e.abbr)})):[],s=e.toppings?e.toppings.filter((function(e){return e.count-1*e.checked>0})).map((function(e){return"+".concat(e.count-1*e.checked===1?"":e.count-1*e.checked).concat(e.abbr)})):[],c=i.concat(s);e.toppingsabbr=c.join(" "),e.lesstoppings=(e.toppings?e.toppings.filter((function(e){return 1*e.checked===1&&0===e.count})).map((function(e){return"".concat(e.toppingid)})):[]).join(","),e.extratoppings=(e.toppings?e.toppings.filter((function(e){return e.count-1*e.checked>0})).map((function(e){return"".concat(e.toppingid)})):[]).join(",");var l=e.toppings&&e.toppings.filter((function(e){return 1*e.checked>0})),u=e.toppings&&e.toppings.filter((function(e){return e.count>0})),d=[],h=[];l&&l.forEach((function(t){var n=r.findToppingPrice(e,t,P.instance.foodinfo.toppingprice);if(n){var a=n[0];d.push(a)}})),u&&u.forEach((function(t){var n=r.findToppingPrice(e,t,P.instance.foodinfo.toppingprice);if(n)for(var a=n[0],o=n[1],i=0;i<o;i++)h.push(a)})),h.sort();var p=a-(l?l.length:0),f=h.slice(p,h.length),m=d.reduce((function(e,t){return e+t}),0),g=f.reduce((function(e,t){return e+t}),0),v=g-m>0?g-m:0;return o?Math.round(100*(1*o.price+v))/100:void 0}},{key:"computeFoodHash",value:function(e){var t=JSON.parse(JSON.stringify(e));return delete t.count,delete t.prices,delete t.toppings,e.details&&e.details.map((function(e){delete e.selectedFood.prices,delete e.selectedFood.toppings})),A.instance.hash(JSON.stringify(t))}},{key:"addOfferToCart",value:function(e){e.count||(e.count=1);var t=0;e.details.map((function(e){e.selectedFood&&e.selectedFood.extraOfferPrice&&(t+=e.selectedFood.extraOfferPrice),delete e.selectedFood.prices,delete e.selectedFood.toppings})),e.total=Math.round(100*(1*e.price+t))/100,this.addToCartObject(e)}},{key:"addToCartWithOptions",value:function(e){var t=e,n=t.totalWithOptionPrice+(t.extraOfferPrice?t.extraOfferPrice:0);return void 0!==n&&(t.total=Math.round(100*n)/100,this.addToCartObject(t),!0)}},{key:"addToCartObject",value:function(e){"count"in e||(e.count=1),delete e.prices,delete e.toppings,e.hash=this.computeFoodHash(e);var t=this.cart.find((function(t){return t.hash===e.hash})),n=this.cart;t?t.count+=e.count:(n=[].concat(Object(O.a)(this.cart),[e]),this.cart=n),this.updateTotal()}},{key:"deliveryChargeCalc",value:function(e,t,n){if("Pickup"===n)return 0;if(!t||""===t||!e)return 0;if(!isNaN(t))return 1*t;for(var a=0,r=(e=e.replace(" ","")).length-1;r>=0;r--)isNaN(e.charAt(r))||(a=r);for(var o=e.substring(0,e.length-a-1).toLowerCase(),i=t.toLowerCase().replace(" ","").split(";"),s=-1,c=0;c<i.length;c++)if(-1!==i[c].indexOf(":")){var l=i[c].split(":");if(""!==l[1]&&l[0].split(",").indexOf(o)>-1){s=1*l[1];break}}return s}},{key:"setDeliveryAddress",value:function(e){this.deliveryAddress.person=e.person,this.deliveryAddress.address=e.address,this.deliveryAddress.postcode=e.postcode,this.deliveryAddress.city=e.city,this.deliveryAddress.phone=e.phone}},{key:"updateTotal",value:function(){this.subtotal=Math.round(100*this.cart.reduce((function(e,t){return 1*e+t.total*t.count}),0))/100,this.totalCartFoodCount=this.cart.reduce((function(e,t){return 1*e+t.count}),0);var e=Math.round(100*this.cart.filter((function(e){return"details"in e})).reduce((function(e,t){return 1*e+t.total*t.count}),0))/100;this.deliveryCharge=Math.round(100*this.getDeliveryCharge(this.deliveryMethod))/100,this.discount=0,isNaN(P.instance.site.online_discount)||(this.discount=1*(Math.floor((this.subtotal-e)*P.instance.site.online_discount)/100).toFixed(2)),this.totalCartValue=this.subtotal-this.discount+Math.max(0,this.deliveryCharge),this.totalCartValue=Math.round(100*this.totalCartValue)/100,this.cartSubject.next("changed")}},{key:"getDeliveryCharge",value:function(e){var t=0,n=this.deliveryAddress&&this.deliveryAddress.postcode&&""!==this.deliveryAddress.postcode?this.deliveryAddress.postcode:P.instance.auth&&P.instance.auth.postcode&&""!==P.instance.auth.postcode?P.instance.auth.postcode:"";return"Delivery"===e&&""!==n&&(t=this.deliveryChargeCalc(n,P.instance.site.delivery_charge,e)),t}},{key:"checkBeforeCheckoutProceed",value:function(){if(e.instance.totalCartValue<1*P.instance.site.minorder)return P.instance.showToast("Minimum order is "+A.instance.formatPrice(P.instance.site.minorder),"error","bottom"),!1;if("open"!==P.instance.site.shopStatus&&!P.instance.isTestOrder())return P.instance.showToast("Sorry! We are closed now.","error","bottom"),!1;var t=0;return e.instance.cart.forEach((function(e){e.selectedSize&&e.selectedSize.abr&&e.selectedSize.abr.indexOf("1/4")>-1&&(t+=e.count),e.details&&e.details.forEach((function(n){if(n.selectedFood){var a=n.selectedFood;a.selectedSize&&a.selectedSize.abr&&a.selectedSize.abr.indexOf("1/4")>-1&&(t+=e.count)}}))})),t%2!==1||(P.instance.showToast("You must choose another Half meter pizza!","error","bottom"),!1)}}]),e}();D.instance=D.instance||new D;var z=n(1019),I=n(1015),U=(Object(f.a)((function(e){return{toolbar:{flexGrow:1,color:"white"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),Object(p.a)({palette:{error:{main:"#ff604f"}}}),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={show:!1,toastMsg:"",toastType:"",toastTopBottom:""},P.instance.toastSubject.subscribe((function(e){if(e.msg){if(a.state.show)return void a.setState({show:!1},(function(){P.instance.toastSubject.next(e)}));a.setState({show:!0,toastMsg:e.msg,toastType:e.type,toastTopBottom:e.position})}})),a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.show&&r.a.createElement(z.a,{open:!0,autoHideDuration:6e3,anchorOrigin:{vertical:this.state.toastTopBottom,horizontal:"center"},onClose:function(){e.setState({show:!1})}},r.a.createElement(I.a,{onClose:function(){e.setState({show:!1})},severity:this.state.toastType?this.state.toastType:"success"},this.state.toastMsg)))}}]),n}(r.a.Component)),N=(n(940),n(987)),_=n(988),$=n(989),B=n(27),L=n.n(B),J=n(990),R=(Object(f.a)((function(e){return{toolbar:{flexGrow:1,color:"white"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),r.a.Component,n(994)),W=n(995),H=n(948),G=n(1014),V=n(300),K=n.n(V),Y=n(48),Z=n.n(Y),q=n(299),Q=n.n(q),X=(r.a.Component,n(998)),ee=n(999),te=n(1e3),ne=n(1013),ae=n(1020),re=n(103),oe=n.n(re),ie=(r.a.Component,n(307)),se=n(1003),ce=n(1002),le=n(1018),ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={termsAccept:!1,planid:""},a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;P.instance.siteSubject.subscribe((function(){setTimeout((function(){e.showPaypal()}),2e3)}))}},{key:"render",value:function(){var e=this;this.props.classes,new URLSearchParams(window.location.href).get("u");return r.a.createElement(_.a,{container:!0,spacing:3,style:{minHeight:"100%",marginTop:50,marginBottom:50},className:"gridNoMargin background1",justify:"center"},r.a.createElement(_.a,{item:!0,xs:12,sm:6,md:6,style:{zIndex:10}},r.a.createElement(ie.a,{style:{padding:40,textAlign:"left",minHeight:120,position:"relative",backgroundColor:"#FFF"},elevation:3},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(k.a,{style:{fontWeight:"bold",marginBottom:5},variant:"text"},"Commander VPN")),r.a.createElement(X.a,{style:{textAlign:"right"}},r.a.createElement(ee.a,{button:!0,disablePadding:!0},r.a.createElement(te.a,{primary:"\u06cc\u06a9\u0645\u0627\u0647\u0647",secondary:" 20 \u0647\u0632\u0627\u0631 \u062a\u0648\u0645\u0627\u0646"})),r.a.createElement(ee.a,{button:!0,disablePadding:!0},r.a.createElement(te.a,{primary:"\u0633\u0647 \u0645\u0627\u0647\u0647",secondary:" 50 \u0647\u0632\u0627\u0631 \u062a\u0648\u0645\u0627\u0646"})),r.a.createElement(ee.a,{button:!0,disablePadding:!0},r.a.createElement(te.a,{primary:"\u0634\u0634 \u0645\u0627\u0647\u0647",secondary:" 90 \u0647\u0632\u0627\u0631 \u062a\u0648\u0645\u0627\u0646"}))),r.a.createElement(k.a,{style:{fontSize:"10px",display:"none"},id:"terms"}),r.a.createElement(ce.a,{control:r.a.createElement(le.a,{inputRef:function(t){return e.termsAccept=t},color:"primary"}),label:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"I agree with")," ",r.a.createElement(se.a,{onClick:function(){return P.instance.showMessageBox(document.getElementById("terms").innerHTML,"Terms and Conditions",""),!1}},"the terms and conditions"))}),r.a.createElement(S.a,{variant:"contained",color:"primary",fullWidth:!0},"\u062e\u0631\u06cc\u062f"))))}}]),n}(r.a.Component),de=(r.a.Component,r.a.Component,n(75)),he=n.n(de),pe=Object(f.a)((function(e){return{toolbar:{flexGrow:1,color:"white"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),fe=(r.a.Component,n(1005)),me=(r.a.Component,n(1001)),ge=n(1021),ve=n(1016),ye=n(1022),be=(r.a.Component,n(1006)),we=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),g.app=Object(l.a)(a),a.state={show:!1,offer:{},showDrawer:!1,chosen:{},detail:{},offerTotal:0,count:1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;D.instance.showDialogSubject.subscribe((function(t){if("OfferOptionsDialog"===t.name&&t.show)if(t.extra.offerFood){e.state.detail.selectedFood=t.extra.offerFood,e.state.detail.selectedFood.count=1;var n=0;e.state.offer.details.map((function(e){e.selectedFood&&e.selectedFood.extraOfferPrice&&(n+=e.selectedFood.extraOfferPrice)})),e.state.offer.total=1*e.state.offer.price+n,e.setState({detail:e.state.detail,offerTotal:e.state.offer.total,count:1})}else e.setState({offer:JSON.parse(JSON.stringify(t.extra.offer)),show:t.show,showDrawer:!1,chosen:{},offerTotal:1*t.extra.offer.price,count:1})}))}},{key:"findOptions",value:function(e){if(!e)return[];var t=[],n=P.instance.foodinfo;if(e.typeid>0){var a=A.instance.findByKeyValue(n.types,"typeid",e.typeid);a&&a.title&&(t=n.foods.filter((function(e){return e.typeid===a.typeid})))}return e.foodid>0&&(t=n.foods.filter((function(t){return t.foodid===e.foodid}))),t}},{key:"chooseFood",value:function(e){this.setState({showDrawer:!1}),this.state.detail.selectedFood=e,e.prices&&e.prices.length>1&&D.instance.showDialogSubject.next({name:"FoodOptionsDialog",show:!0,extra:{offerDetail:this.state.detail}})}},{key:"render",value:function(){var e=this,t=this.state.offer;return this.state.show&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{fullWidth:!0,open:!0,onClose:function(){return e.setState({show:!1})},style:{maxWidth:"960px",margin:"0 auto"},className:"dlg1 minWidth300"},r.a.createElement(R.a,{position:"sticky"},r.a.createElement(W.a,null,r.a.createElement(H.a,{edge:"start",color:"inherit",onClick:function(){return e.setState({show:!1})},"aria-label":"close"},r.a.createElement(Z.a,null)),r.a.createElement(k.a,{variant:"h6",style:{flexGrow:1}},t&&t.title))),r.a.createElement(X.a,{style:{marginBottom:10}},t&&t.details.map((function(t){return r.a.createElement(ee.a,{button:!0,selected:!0,key:t.offerdetailid,onClick:function(){e.setState({showDrawer:!0,detail:t})},style:{marginBottom:5,marginTop:5}},r.a.createElement(te.a,{primary:t.title}),r.a.createElement(be.a,{onClick:function(){e.setState({showDrawer:!0,detail:t})}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("span",null,t.selectedFood?t.selectedFood.title:"Choose"),r.a.createElement(L.a,null))))}))),r.a.createElement(ne.a,{label:"Note",variant:"outlined",inputRef:function(t){return e.note=t},style:{marginLeft:20,marginRight:20},size:"small"}),r.a.createElement(ne.a,{label:"Quantity",type:"number",placeholder:"Quantity",margin:"normal",defaultValue:"1",onChange:function(t){t.preventDefault();var n=Math.max(1,t.target.value);e.state.offer.count=n,e.setState({count:n})},inputRef:function(t){return e.count=t},style:{marginLeft:20,marginRight:20,maxWidth:100}}),r.a.createElement(E.a,{style:{position:"sticky",bottom:0,zIndex:200,marginTop:0,borderTop:"1px dotted red",textAlign:"center",backgroundColor:"white",height:40}},r.a.createElement(G.a,{component:"span",m:1,style:{margin:"0 auto"}},A.instance.formatPrice(this.state.offerTotal*this.state.count)),r.a.createElement(S.a,{style:{position:"absolute",right:0},color:"secondary",onClick:function(){var t=0;e.state.offer.details.forEach((function(e){e.selectedFood&&t++})),t<e.state.offer.details.length?P.instance.showToast("Choose all items","error","bottom"):(e.state.offer.note=e.note.value,D.instance.addOfferToCart(e.state.offer),e.setState({show:!1}))}},"ADD ",r.a.createElement(L.a,null)))),r.a.createElement(ae.a,{anchor:"bottom",open:this.state.showDrawer,onClose:function(){return e.setState({showDrawer:!1})},PaperProps:{style:{maxWidth:500,margin:"0 auto"}}},r.a.createElement(X.a,null,this.state.detail&&this.findOptions(this.state.detail).map((function(t){return r.a.createElement(ee.a,{button:!0,key:t.foodid,onClick:function(){return e.chooseFood(t)}},r.a.createElement(te.a,{primary:r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{flexGrow:1}},t.title),e.state.detail.selectedFood&&e.state.detail.selectedFfoodid===t.foodid&&r.a.createElement(oe.a,{color:"disabled"}))}))})))))}}]),n}(r.a.Component);we.contextType=g;var ke=n(1007),Ee=n(684),Se=n.n(Ee),xe=n(301),Oe=n.n(xe),Ce=n(304),Te=n.n(Ce),je=n(303),Ae=n.n(je),Me=(Object(f.a)((function(e){return{toolbar:{flexGrow:1,color:"white"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),r.a.Component,n(1008)),Fe=n(1009),Pe=(r.a.Component,r.a.Component,function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={show:!1,message:"",title:""},P.instance.messageBoxSubject.subscribe((function(e){e.msg&&a.setState({show:!0,message:e.msg,title:e.title})})),a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return this.state.show&&r.a.createElement(y.a,{open:!0},r.a.createElement(b.a,null,this.state.title),r.a.createElement(w.a,{style:{minWidth:250,minHeight:150}},r.a.createElement(k.a,{component:"body2"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.message}}))),r.a.createElement(E.a,null,r.a.createElement(S.a,{color:"primary",onClick:function(){e.setState({show:!1})}},"OK")))}}]),n}(r.a.Component)),De=n(949),ze=n(1010),Ie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={show:!1,message:""},P.instance.waitingSubject.subscribe((function(e){var t;a.setState({show:e.show,message:null!==(t=e.msg)&&void 0!==t?t:""})})),a}return Object(c.a)(n,[{key:"render",value:function(){return this.state.show&&r.a.createElement(De.a,{open:!0,style:{zIndex:9999,backgroundColor:"rgb(0 0 0 / 70%)"}},r.a.createElement("span",{style:{alignItems:"center",display:"flex",fontSize:"larger",flexDirection:"column"}},r.a.createElement(ze.a,{color:"secondary"}),r.a.createElement("span",{style:{marginTop:10,color:"#e6e6e6"}},this.state.message)))}}]),n}(r.a.Component),Ue=Object(p.a)({type:"light",palette:{error:{main:"#ff604f"}}}),Ne=Object(p.a)({type:"dark"}),_e=Object(f.a)((function(e){return{toolbar:{flexGrow:1,color:"white"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),$e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).user={},a.classes={},g.app=Object(l.a)(a),a.state={fatalError:void 0},a.classes=_e,a}return Object(c.a)(n,[{key:"reload",value:function(){window.location.reload()}},{key:"componentDidMount",value:function(){var e=this;P.instance.siteSubject.subscribe((function(){P.instance.addPaypalScript(),e.setState({site:P.instance.site})})),P.instance.fatalErrorSubject.subscribe((function(t){e.setState({fatalError:t})}))}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this,t=P.instance.site;return r.a.createElement(h.a,null,r.a.createElement(m.a,{theme:t&&"dark"===t.appTheme?Ne:Ue},r.a.createElement("div",{id:"mainContainer",style:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"#555555",zIndex:-9999}}),r.a.createElement(v.a,{style:{padding:"0",minHeight:"100%",height:"auto !important",margin:"0 auto -142px",maxWidth:"1224px"}},this.state.fatalError&&r.a.createElement(y.a,{open:!0},r.a.createElement(b.a,null,"Error"),r.a.createElement(w.a,null,r.a.createElement(k.a,{component:"h5",style:{textAlign:"center"}},this.state.fatalError)),r.a.createElement(E.a,null,r.a.createElement(S.a,{color:"primary",onClick:function(){e.setState({fatalError:null})}},"Cancel"),r.a.createElement(S.a,{color:"primary",onClick:function(){e.reload()}},"Reload"))),r.a.createElement(ue,null),r.a.createElement(Pe,null),r.a.createElement(Ie,null),r.a.createElement(U,null),r.a.createElement("div",{style:{height:142}})),!1,r.a.createElement(x.a,{mdUp:!0})))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement($e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[707,1,2]]]);
//# sourceMappingURL=main.2a9ec771.chunk.js.map