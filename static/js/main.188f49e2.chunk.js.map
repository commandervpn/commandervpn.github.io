{"version":3,"sources":["AppContext.js","components/service/Util.js","components/service/Site.js","components/service/Cart.js","components/Toast.js","components/BottomBar.js","components/CartDialog.js","components/DeliveryDialog.js","components/RegisterCustomer.js","components/LoginDialog.js","components/ProfileDialog.js","components/MyAppBar.js","components/PaymentDialog.js","components/FoodOptionsDialog.js","components/OfferOptionsDialog.js","components/LeftDrawer.js","components/MessageBox.js","components/OrderHistoryDialog.js","components/ForgotPassDialog.js","components/WaitingProgress.js","App.js","serviceWorker.js","index.js"],"names":["AppContext","React","createContext","Util","isMobile","test","navigator","userAgent","substr","toLowerCase","indexOf","window","Capacitor","platform","v","map","Math","floor","console","log","str","i","hash","length","charCodeAt","num","size","s","email","price","toFixed","array","key","sort","a","b","x","y","val","obj","Error","captureStackTrace","this","getStackTrace","stack","date","format","utc","MMMM","MMM","dddd","ddd","ii","len","getUTCFullYear","getFullYear","replace","toString","M","getUTCMonth","getMonth","d","getUTCDate","getDate","H","getUTCHours","getHours","h","m","getUTCMinutes","getMinutes","getUTCSeconds","getSeconds","f","getUTCMilliseconds","getMilliseconds","round","T","charAt","t","tz","getTimezoneOffset","K","tzMin","abs","day","getUTCDay","getDay","RegExp","object","instance","Site","sitekey","site","state","registration_pp_plan_id","registration_pp_client_id","auth","siteSubject","Subject","authSubject","fatalErrorSubject","toastSubject","messageBoxSubject","waitingSubject","baseApiUrl","baseApiUrls","baseApiUrls2","resp1","String","prototype","contains","startIndex","call","hostname","location","apionhost","match","push","promises","idx","url","fetch","method","then","data","text","catch","err","Promise","all","setTimeout","showToast","formData","URLSearchParams","_k","_hj","hj","globals","get","isLogin","_uu","_u","username","_ui","customerid","_up","crypto","createHash","update","pass","digest","_t","Date","now","_str","JSON","stringify","_h","append","headers","body","resp","parse","onerror","message","file","line","col","error","sendEventLog","event","e","errresp","formatDate","callApi","next","catchErrorInApi","localStorage","removeItem","reload","resultCallback","recovery","res","changepass","reg","checkAuth","password","silent","setItem","firstname","lastname","flatnumber","housenumber","housename","street","town","postcode","getorderid","total","Cart","totalCartValue","orderid","orderParams","cartSubject","type","typeid","foodinfo","types","find","title","foods","filter","msg","position","showWaiting","show","_navigator","_nav","script","document","createElement","src","async","stacktrace","appendChild","k","cart","deliveryMethod","paymentMethod","subtotal","totalCartFoodCount","deliveryCharge","discount","deliveryAddress","person","address1","address2","city","phone","addressnote","simpleProps","showDialogSubject","dst","copyProps","getItem","food","prices","food2","addToCartObject","topping","toppingprice","tcategoryids","foodtcategory","cat","foodid","tcategoryid","selectedSize","sizeid","id","p","includes","toppingid","reverse","count","updateTotal","splice","model","freeToppingCount","modelid","showMessageBox","toppings","forEach","checked","abbrsm","abbr","abbrsp","abbrs","concat","toppingsabbr","join","lesstoppings","extratoppings","baseselected","selected","basetpsList","tpsList","findToppingPrice","tp","tc","freeCount","tpsListP","slice","basetps","reduce","tps","tpsDiff","undefined","f1","details","detail","selectedFood","offer","extra","extraOfferPrice","foodToAdd","totalWithOptionPrice","computeFoodHash","foodexisted","c","newcart","deliveryChargeRules","isNaN","lastDigit","postcode1","substring","deliveryChargeRules2","split","charge","d3","address","totalOffers","item","getDeliveryCharge","online_discount","max","deliveryChargeCalc","delivery_charge","minorder","formatPrice","shopStatus","isTestOrder","halfMeterCount","abr","Toast","makeStyles","theme","toolbar","flexGrow","color","root","menuButton","marginRight","spacing","createMuiTheme","palette","main","props","toastMsg","toastType","toastTopBottom","subscribe","toast","setState","Fragment","Snackbar","open","autoHideDuration","anchorOrigin","vertical","horizontal","onClose","Alert","severity","Component","RegisterCustomer","termsAccept","planid","classes","href","Grid","container","style","minHeight","marginTop","marginBottom","className","justify","xs","sm","md","zIndex","Paper","padding","textAlign","backgroundColor","elevation","Typography","fontWeight","variant","List","ListItem","button","disablePadding","onClick","alert","ListItemText","primary","secondary","useStyles","OfferOptionsDialog","app","showDrawer","chosen","offerTotal","name","offerFood","o","findByKeyValue","offerDetail","Dialog","fullWidth","maxWidth","margin","AppBar","Toolbar","IconButton","edge","aria-label","offerdetailid","ListItemSecondaryAction","display","alignItems","TextField","label","inputRef","note","marginLeft","placeholder","defaultValue","onChange","preventDefault","cnt","target","value","DialogActions","bottom","borderTop","height","Box","component","Button","right","selectedCount","addOfferToCart","Drawer","anchor","PaperProps","findOptions","chooseFood","selectedFfoodid","contextType","MessageBox","DialogTitle","DialogContent","minWidth","dangerouslySetInnerHTML","__html","WaitingProgress","Backdrop","fontSize","flexDirection","CircularProgress","themeLight","themeDark","App","user","fatalError","addPaypalScript","appTheme","top","left","width","backgroundSize","backgroundPosition","Container","Boolean","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.188f49e2.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst AppContext = React.createContext(null);\r\nexport default AppContext\r\n","import { GroupBy, IsEmpty, Map } from \"react-lodash\"\r\nimport map from 'lodash/map'\r\n\r\nexport default class Util {\r\n    static instance = Util.instance || new Util()\r\n\r\n\r\n    isOnMobile(){\r\n        let isMobile = false;\r\n        if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)\r\n            || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) {\r\n            isMobile = true;\r\n        }\r\n        return isMobile;\r\n    }\r\n    isOnAndroid(){\r\n        let ua = navigator.userAgent.toLowerCase();\r\n        let isAndroid = ua.indexOf(\"android\") > -1; //&& ua.indexOf(\"mobile\");\r\n        return isAndroid;\r\n    }\r\n\r\n    isNative(){\r\n        return (window.Capacitor && window.Capacitor.platform) ? true: false;\r\n    }\r\n    helloWorld() {\r\n        let v = map([6.1, 4.2, 6.3], Math.floor);\r\n        console.log(v);\r\n        console.log(\"Hello World... \\(^_^)/ !!\")\r\n    }\r\n\r\n    static str(object){\r\n        return object? object+\"\" : \"\";\r\n    }\r\n    hash(str) {\r\n        var hash = 0, i, chr;\r\n        for (i = 0; i < str.length; i++) {\r\n            chr = str.charCodeAt(i);\r\n            hash = ((hash << 5) - hash) + chr;\r\n            hash |= 0; // Convert to 32bit integer\r\n        }\r\n        return hash;\r\n    }\r\n\r\n    padnumber(num, size) {\r\n        //console.log(num);\r\n        var s = \"          \" + num;\r\n        return s.substr(s.length - size);\r\n    }\r\n\r\n    validateEmail(email) {\r\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(email);\r\n    }\r\n    formatPrice(price) {\r\n        price = price * 1;\r\n        if (price >= 0)\r\n            return \"£\" + price.toFixed(2);\r\n        return \"\";\r\n    }\r\n\r\n    sortByKey(array, key) {\r\n        return array.sort(function(a, b) {\r\n            var x = a[key]; var y = b[key];\r\n            return ((x < y) ? -1 : ((x > y) ? 1 : 0));\r\n        });\r\n    }\r\n    findByKeyValue(array, key, val) {\r\n        for (var i=0; i < array.length; i++) {\r\n            if (array[i][key] === val) {\r\n                return array[i];\r\n            }\r\n        }\r\n    }\r\n\r\n    getStackTrace() {\r\n        let obj = {};\r\n        Error.captureStackTrace(obj, this.getStackTrace);\r\n        return obj.stack;\r\n    }\r\n\r\n    formatDate(date, format, utc) {\r\n        let MMMM = [\"\\x00\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n        let MMM = [\"\\x01\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n        let dddd = [\"\\x02\", \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n        let ddd = [\"\\x03\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\r\n        function ii(i, len) {\r\n            let s = i + \"\";\r\n            len = len || 2;\r\n            while (s.length < len) s = \"0\" + s;\r\n            return s;\r\n        }\r\n\r\n        let y = utc ? date.getUTCFullYear() : date.getFullYear();\r\n        format = format.replace(/(^|[^\\\\])yyyy+/g, \"$1\" + y);\r\n        format = format.replace(/(^|[^\\\\])yy/g, \"$1\" + y.toString().substr(2, 2));\r\n        format = format.replace(/(^|[^\\\\])y/g, \"$1\" + y);\r\n\r\n        let M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;\r\n        format = format.replace(/(^|[^\\\\])MMMM+/g, \"$1\" + MMMM[0]);\r\n        format = format.replace(/(^|[^\\\\])MMM/g, \"$1\" + MMM[0]);\r\n        format = format.replace(/(^|[^\\\\])MM/g, \"$1\" + ii(M));\r\n        format = format.replace(/(^|[^\\\\])M/g, \"$1\" + M);\r\n\r\n        let d = utc ? date.getUTCDate() : date.getDate();\r\n        format = format.replace(/(^|[^\\\\])dddd+/g, \"$1\" + dddd[0]);\r\n        format = format.replace(/(^|[^\\\\])ddd/g, \"$1\" + ddd[0]);\r\n        format = format.replace(/(^|[^\\\\])dd/g, \"$1\" + ii(d));\r\n        format = format.replace(/(^|[^\\\\])d/g, \"$1\" + d);\r\n\r\n        let H = utc ? date.getUTCHours() : date.getHours();\r\n        format = format.replace(/(^|[^\\\\])HH+/g, \"$1\" + ii(H));\r\n        format = format.replace(/(^|[^\\\\])H/g, \"$1\" + H);\r\n\r\n        let h = H > 12 ? H - 12 : H == 0 ? 12 : H;\r\n        format = format.replace(/(^|[^\\\\])hh+/g, \"$1\" + ii(h));\r\n        format = format.replace(/(^|[^\\\\])h/g, \"$1\" + h);\r\n\r\n        let m = utc ? date.getUTCMinutes() : date.getMinutes();\r\n        format = format.replace(/(^|[^\\\\])mm+/g, \"$1\" + ii(m));\r\n        format = format.replace(/(^|[^\\\\])m/g, \"$1\" + m);\r\n\r\n        let s = utc ? date.getUTCSeconds() : date.getSeconds();\r\n        format = format.replace(/(^|[^\\\\])ss+/g, \"$1\" + ii(s));\r\n        format = format.replace(/(^|[^\\\\])s/g, \"$1\" + s);\r\n\r\n        let f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();\r\n        format = format.replace(/(^|[^\\\\])fff+/g, \"$1\" + ii(f, 3));\r\n        f = Math.round(f / 10);\r\n        format = format.replace(/(^|[^\\\\])ff/g, \"$1\" + ii(f));\r\n        f = Math.round(f / 10);\r\n        format = format.replace(/(^|[^\\\\])f/g, \"$1\" + f);\r\n\r\n        let T = H < 12 ? \"AM\" : \"PM\";\r\n        format = format.replace(/(^|[^\\\\])TT+/g, \"$1\" + T);\r\n        format = format.replace(/(^|[^\\\\])T/g, \"$1\" + T.charAt(0));\r\n\r\n        let t = T.toLowerCase();\r\n        format = format.replace(/(^|[^\\\\])tt+/g, \"$1\" + t);\r\n        format = format.replace(/(^|[^\\\\])t/g, \"$1\" + t.charAt(0));\r\n\r\n        let tz = -date.getTimezoneOffset();\r\n        let K = utc || !tz ? \"Z\" : tz > 0 ? \"+\" : \"-\";\r\n        if (!utc) {\r\n            tz = Math.abs(tz);\r\n            let tzHrs = Math.floor(tz / 60);\r\n            let tzMin = tz % 60;\r\n            K += ii(tzHrs) + \":\" + ii(tzMin);\r\n        }\r\n        format = format.replace(/(^|[^\\\\])K/g, \"$1\" + K);\r\n\r\n        let day = (utc ? date.getUTCDay() : date.getDay()) + 1;\r\n        format = format.replace(new RegExp(dddd[0], \"g\"), dddd[day]);\r\n        format = format.replace(new RegExp(ddd[0], \"g\"), ddd[day]);\r\n\r\n        format = format.replace(new RegExp(MMMM[0], \"g\"), MMMM[M]);\r\n        format = format.replace(new RegExp(MMM[0], \"g\"), MMM[M]);\r\n\r\n        format = format.replace(/\\\\(.)/g, \"$1\");\r\n\r\n        return format;\r\n    }\r\n\r\n}","import {Subject} from 'rxjs';\r\nimport Util from './Util';\r\nimport crypto from 'crypto';\r\n\r\nimport {errorObject} from \"rxjs/internal-compatibility\";\r\nimport Cart from \"./Cart\";\r\n\r\nconst SITE_KEY = 'GJ67FE9'; //''GJ67FE9' //'YZ54Y23' //'E6SA6T3'; //'YZ54Y23';\r\n\r\nexport default class Site {\r\n    static instance = Site.instance || new Site()\r\n\r\n    sitekey = \"\";\r\n    site = {\r\n        state: '',\r\n        registration_pp_plan_id: '',\r\n        registration_pp_client_id:''\r\n    };\r\n    auth = {};\r\n    siteSubject = new Subject();\r\n    authSubject = new Subject();\r\n    fatalErrorSubject = new Subject();\r\n    toastSubject = new Subject();\r\n    messageBoxSubject = new Subject();\r\n    waitingSubject = new Subject();\r\n    baseApiUrl = 'https://commandervpn.github.io/api/json';\r\n    baseApiUrls = ['https://commandervpn.github.io/api/json', 'https://commandervpn.github.io/api/json'];\r\n    baseApiUrls2 = [];\r\n    resp1 = null;\r\n\r\n    checkApiUrls(){\r\n        let hostname=window.location.hostname\r\n        let apionhost=\"https://\" + window.location.hostname + \"/api/json\"\r\n        if (hostname !== 'localhost' &&\r\n            hostname.indexOf('192.') === -1 &&\r\n            (hostname.match(/\\./g) || []).length>2 &&\r\n            this.baseApiUrls.indexOf(apionhost)===-1\r\n        ) {\r\n            this.baseApiUrls.push(apionhost)\r\n        }\r\n\r\n        let promises = [];\r\n        for (let idx in Site.instance.baseApiUrls) {\r\n            let url = Site.instance.baseApiUrls[idx]\r\n            promises.push(fetch(url + \"/test.txt\", {method:\"POST\"}).then((data)=>{\r\n                Site.instance.baseApiUrls2.push( url)\r\n                console.log(\"ok\", url)\r\n                data.text()\r\n            }).catch((err)=> {\r\n                console.log(\"err\", url)\r\n            }))\r\n        }\r\n        return Promise.all(promises).then(()=>{\r\n            if (Site.instance.baseApiUrls2.length==0){\r\n                setTimeout(()=>{\r\n                    Site.instance.showToast(\"Error\", \"Error in connecting to the store\")\r\n                }, 5000)\r\n            }else {\r\n                if (Site.instance.baseApiUrls2.indexOf(this.baseApiUrl) === -1) {\r\n                    Site.instance.baseApiUrl = Site.instance.baseApiUrls2[0]\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    callApi(url, data) {\r\n        let formData = new URLSearchParams();\r\n        if (data == null) data = {};\r\n        data._k = this.sitekey;\r\n        data._hj = window.hj && window.hj.globals && window.hj.globals.get(\"userId\") ? window.hj.globals.get(\"userId\") : \"\";\r\n        if (this.isLogin()) {\r\n            data._uu = this.auth._u.username;\r\n            data._ui = this.auth.customerid;\r\n            data._up = crypto.createHash('md5').update(this.auth._u.pass).digest('hex');\r\n        }\r\n        data._t = Date.now() + '';\r\n        let _str = JSON.stringify(data).replace(/\"/g, '')\r\n        //console.log(_str)\r\n        let _h = crypto.createHash('md5').update(_str).digest('hex');\r\n        data._h = _h;\r\n\r\n        for (let f in data) {\r\n            formData.append(f, data[f]);\r\n        }\r\n        let promise = fetch(this.baseApiUrl + url, {\r\n            method: 'post',\r\n            headers: {\r\n                'Accept': 'application/json, text/plain, */*',\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            }, body: formData\r\n        })\r\n        return promise.then(resp =>  resp.text() )\r\n            .then(resp=> {\r\n                this.resp1=resp\r\n                return JSON.parse(resp)\r\n            })\r\n    }\r\n\r\n    constructor() {\r\n        if (!('contains' in String.prototype)) {\r\n            String.prototype.contains = function (str, startIndex) {\r\n                return -1 !== String.prototype.indexOf.call(this, str, startIndex);\r\n            };\r\n        }\r\n    }\r\n\r\n    init() {\r\n        window.onerror = (message, file, line, col, error) => {\r\n            this.sendEventLog({\r\n                data: JSON.stringify({\r\n                    message: {\r\n                        message: message,\r\n                        file: file,\r\n                        line: line,\r\n                        col: col,\r\n                        error: error.message,\r\n                        stack: Util.instance.getStackTrace()\r\n                    }\r\n                }),\r\n                event: \"pageerror\"\r\n            })\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n    catchErrorInApi(e) {\r\n\r\n//        if ((error+\"\").indexOf('Unexpected token',0)>-1) error=\"Connection Error\";\r\n        let err = e+\"\"\r\n        let errresp = this.resp1\r\n       // this.fatalErrorSubject.next(\"Error: \" + err)\r\n        if (err.contains(\"SSL error\")) {\r\n            err = Util.instance.formatDate(new Date(), \"yyyy/MM/dd hh:mm:ss Z\") + \" **THE DATE & TIME ON YOUR PC MAY BE INVALID. UPDATE IT PLEASE** \" + err\r\n        }\r\n        setTimeout(() => {\r\n            Site.instance.sendEventLog({\r\n                data: JSON.stringify({\r\n                    err: err,\r\n                    resp: errresp,\r\n                    stack: e.stack\r\n                }), event: \"apierror\"\r\n            })\r\n        }, 2000)\r\n        this.showToast(err, \"error\", \"bottom\");\r\n//        console.log(error);\r\n    }\r\n\r\n    fetchSiteData() {\r\n        this.callApi(\"/settings\", {})\r\n            .then((data) => {\r\n                this.site = data;\r\n                this.site.state='fetched'\r\n                this.siteSubject.next(\"changed\");\r\n            }).catch(err => this.catchErrorInApi(err))\r\n    }\r\n\r\n    logout() {\r\n        this.auth = {};\r\n        localStorage.removeItem(\"auth\");\r\n        localStorage.removeItem(\"sitekey\");\r\n        localStorage.removeItem(\"cart\");\r\n        window.location.reload();\r\n        this.authSubject.next(\"logout\");\r\n    }\r\n\r\n    sendPassRecoveryCode(data, resultCallback) {\r\n        data.recovery = 1;\r\n        this.callApi(\"/auth\", data)\r\n            .then(res => {\r\n                console.log(res);\r\n                if (res.error) {\r\n                    this.showToast(\"Password Recovery error \" + res.error, \"error\", \"bottom\");\r\n                    resultCallback(0, res.error);\r\n                } else {\r\n                    this.showToast(\"Recovery Code sent to your email address\", \"success\", \"bottom\")\r\n                    resultCallback(1, \"OK\");\r\n                }\r\n            }).catch(err => this.catchErrorInApi(err))\r\n    }\r\n\r\n    changePassword(data, resultCallback) {\r\n        data.changepass = 1;\r\n        this.callApi(\"/auth\", data)\r\n            .then(res => {\r\n                if (res.error) {\r\n                    this.showToast(res.error, \"error\", \"bottom\");\r\n                    resultCallback(0, res.error);\r\n                } else {\r\n                    this.showToast(\"Your password has been set successfully\", \"success\", \"bottom\")\r\n                    resultCallback(1, \"OK\");\r\n                }\r\n            }).catch(err => this.catchErrorInApi(err))\r\n    }\r\n\r\n    registerUser(data, resultCallback) {\r\n        data.reg = 1;\r\n        this.callApi(\"/auth\", data)\r\n            .then(res => {\r\n                console.log(res);\r\n                if (res.error) {\r\n                    this.showToast(\"Register error \" + res.error, \"error\", \"bottom\");\r\n                    resultCallback(0, res.error);\r\n                } else {\r\n                    this.showToast(\"Registration Successful\", \"success\", \"bottom\")\r\n                    this.checkAuth(data.email, data.password, resultCallback)\r\n                }\r\n            }).catch(err => this.catchErrorInApi(err))\r\n    }\r\n\r\n    updateUserProfile(data, resultCallback) {\r\n        data.update = 1;\r\n        this.callApi(\"/auth\", data)\r\n            .then(res => {\r\n                if (res.error) {\r\n                    this.showToast(\"Update error \" + res.error, \"error\", \"bottom\");\r\n                    resultCallback(0, res.error);\r\n                } else {\r\n                    this.showToast(\"Update Successful\", \"success\", \"bottom\")\r\n                    this.checkAuth(data.email, data.password, resultCallback, true)\r\n                }\r\n            }).catch(err => console.log(err))\r\n    }\r\n\r\n    checkAuth(email, pass, resultCallback, silent = false) {\r\n        let data = {\r\n            \"email\": email,\r\n            \"pass\": pass\r\n        }\r\n        this.callApi(\"/auth\", data)\r\n            .then(res => {\r\n                console.log(res);\r\n                if (res.error) {\r\n                    localStorage.removeItem(\"auth\");\r\n                    this.showToast(\"Login error \" + res.error, \"error\", \"bottom\");\r\n                    resultCallback(0, res.error);\r\n                } else {\r\n                    res._u = {username: email, pass: pass};\r\n                    this.auth = res;\r\n                    localStorage.setItem(\"auth\", JSON.stringify(res));\r\n                    this.authSubject.next(\"login\");\r\n                    if (!silent) this.showToast(\"Login Successful\", \"success\", \"bottom\");\r\n                    resultCallback(1, \"OK\");\r\n                }\r\n            }).catch(err => this.catchErrorInApi(err))\r\n\r\n    }\r\n\r\n    fetchOrderHistory(resultCallback) {\r\n        if (!this.isLogin()) return;\r\n        this.callApi(\"/orders\", {\"customerid\": this.auth.customerid})\r\n            .then(res => {\r\n                console.log(res);\r\n                if (res.error) {\r\n                    this.showToast(\"Error \" + res.error, \"error\", \"bottom\");\r\n                    resultCallback(0, null);\r\n                } else {\r\n                    resultCallback(1, res);\r\n                }\r\n            }).catch(err => this.catchErrorInApi(err))\r\n    }\r\n\r\n    getCustomerAddress() {\r\n        if (this.isLogin()) {\r\n            let str = Util.str(this.auth.firstname) + \" \" + Util.str(this.auth.lastname) + \", \" +\r\n                Util.str(this.auth.flatnumber) + \" \" + Util.str(this.auth.housenumber) + \" \" +\r\n                Util.str(this.auth.housename) + \" \" + Util.str(this.auth.street) + \", \" + Util.str(this.auth.town) +\r\n                \", \" + Util.str(this.auth.postcode);\r\n            str = str.replace('  ', ' ')\r\n                .replace('  ', ' ')\r\n                .replace('  ', ' ')\r\n                .replace(',,', ',');\r\n            return str;\r\n\r\n        } else {\r\n            return \"\";\r\n        }\r\n    }\r\n\r\n    getOrderId(data, resultCallback) {\r\n        data.getorderid = 1;\r\n        data.total = Cart.instance.totalCartValue;\r\n\r\n        this.callApi(\"/order\", data)\r\n            .then(res => {\r\n                if (res.error) {\r\n                    this.showToast(res.error, \"error\", \"bottom\");\r\n                    resultCallback(0, res.error);\r\n                } else {\r\n                    resultCallback(res.orderid, res.error);\r\n                }\r\n            }).catch(err => this.catchErrorInApi(err))\r\n    }\r\n\r\n    completeOrder(orderParams, resultCallback) {\r\n        let data = orderParams\r\n        this.callApi(\"/register\", data)\r\n            .then(res => {\r\n                if (!res.orderid || res.orderid === 0) {\r\n                    resultCallback(0, res.message);\r\n                } else {\r\n                    Cart.instance.cartSubject.next(\"\");\r\n                    resultCallback(res.orderid, res.message);\r\n                }\r\n            }).catch(err => this.catchErrorInApi(err))\r\n    }\r\n\r\n    getFoodsOfType(type) {\r\n        let typeid = this.foodinfo.types.find(t => t.title === type).typeid;\r\n        return this.foodinfo.foods.filter((f) => f.typeid === typeid);\r\n    }\r\n\r\n    showToast(msg, type, position) {\r\n        this.showWaiting(false, \"\")\r\n        this.toastSubject.next({msg: msg, type: type, position: position});\r\n    }\r\n\r\n    showMessageBox(msg, title, type) {\r\n        this.showWaiting(false, \"\")\r\n        this.messageBoxSubject.next({msg: msg, title: title, type: type});\r\n    }\r\n\r\n    showWaiting(show, msg) {\r\n        this.waitingSubject.next({msg: msg, show: show});\r\n    }\r\n\r\n    isLogin() {\r\n        return this.auth && this.auth.customerid && this.customerid !== \"\";\r\n    }\r\n\r\n    checkPostCode(postcode) {\r\n        postcode = postcode.replace(/\\s/g, \"\");\r\n        let regex = /^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i;\r\n        return regex.test(postcode);\r\n    }\r\n\r\n    sendEventLog(data) {\r\n\r\n        let _navigator = {};\r\n        for (let i in navigator) _navigator[i] = navigator[i];\r\n        data._nav = JSON.stringify(_navigator)\r\n\r\n        this.callApi(\"/eventlog\", data)\r\n            .then((data) => {\r\n                console.log(data);\r\n            })\r\n    }\r\n\r\n    addPaypalScript() {\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"https://www.paypal.com/sdk/js?client-id=\" + Site.instance.site.registration_pp_client_id + \"&vault=true&intent=subscription\";\r\n        script.async = true;\r\n        script.onerror = () => {\r\n            let data = {\r\n                stacktrace: Util.instance.getStackTrace()\r\n            }\r\n            // defer to\r\n            setTimeout(() => {\r\n                Site.instance.sendEventLog({data: JSON.stringify(data), event: \"ppjsloaderror\"})\r\n            }, 5000)\r\n\r\n        }\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    isTestOrder() {\r\n        if (this.isLogin() && Site.instance.auth._u.username) {\r\n            const keywords = [\"ruzbahan\"];\r\n            let email = Site.instance.auth._u.username.toLowerCase();\r\n            let ks = keywords.filter(k => {\r\n                return email.contains(k)\r\n            })\r\n            return ks.length > 0\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport {GroupBy, IsEmpty, IsNaN, Map} from \"react-lodash\"\r\nimport map from 'lodash/map'\r\nimport Util from \"./Util\";\r\nimport Site from \"./Site\";\r\n\r\nexport default class Cart {\r\n    static instance = Cart.instance || new Cart()\r\n\r\n    cart=[];\r\n    deliveryMethod=\"Delivery\";\r\n    paymentMethod=\"Online\";\r\n    totalCartValue=0;\r\n    subtotal=0;\r\n    totalCartFoodCount= 0;\r\n    deliveryCharge=0;\r\n    discount=0;\r\n    deliveryAddress={\r\n        person:\"\",\r\n        address1:\"\",\r\n        address2:\"\",\r\n        postcode:\"\",\r\n        city:\"\",\r\n        phone:\"\",\r\n        addressnote:\"\"\r\n    }\r\n\r\n    simpleProps = [\"cart\",\"deliveryMethod\",\"paymentMethod\",\"totalCartValue\",\r\n        \"subtotal\",\"totalCartFoodCount\",\"deliveryCharge\",\"discount\",\"deliveryAddress\"]\r\n\r\n\r\n\r\n    clearCart(){\r\n        this.cart=[];\r\n        this.deliveryMethod=\"Delivery\";\r\n        this.paymentMethod=\"Online\";\r\n        this.totalCartValue=0;\r\n        this.subtotal=0;\r\n        this.totalCartFoodCount= 0;\r\n        this.deliveryCharge=0;\r\n        this.discount=0;\r\n        this.deliveryAddress={\r\n            person:\"\",\r\n            address1:\"\",\r\n            address2:\"\",\r\n            postcode:\"\",\r\n            city:\"\",\r\n            phone:\"\",\r\n            addressnote:\"\"\r\n        }\r\n    }\r\n\r\n    copyProps(src, dst){\r\n        for (let i in this.simpleProps)\r\n            dst[this.simpleProps[i]] = src[this.simpleProps[i]]\r\n    }\r\n    saveToStorage(){\r\n        if (!this.totalCartFoodCount) return;\r\n        let data={}\r\n        data._t=+new Date()\r\n        this.copyProps(this, data)\r\n        localStorage.setItem(\"cart\", JSON.stringify(data));\r\n    }\r\n    loadFromStorage(){\r\n        let data = localStorage.getItem(\"cart\");\r\n        if (!data) return;\r\n        try {\r\n            data = JSON.parse(data)\r\n        } catch(e) {\r\n            localStorage.removeItem(\"cart\")\r\n            data=null\r\n            return\r\n        }\r\n\r\n        let now=+new Date()\r\n        if (now-data._t<15*60*1000) {\r\n            this.copyProps(data, this)\r\n            this.cartSubject.next(\"\")\r\n        }else{\r\n            localStorage.removeItem(\"cart\")\r\n        }\r\n\r\n    }\r\n    cartSubject=new Subject();\r\n    showDialogSubject = new Subject();\r\n\r\n    addToCart(food) {\r\n        if (food.prices.length === 1) {\r\n            let food2 = JSON.parse(JSON.stringify(food));\r\n            food2.total = food2.prices[0].price * 100/100;\r\n            this.addToCartObject(food2);\r\n        }\r\n    }\r\n\r\n    findToppingPrice(food, topping, toppingprice) {\r\n        let tcategoryids = Site.instance.foodinfo.foodtcategory.filter(cat=> cat.foodid===food.foodid).map(cat=>cat.tcategoryid);\r\n        if (tcategoryids.length===0) tcategoryids.push(-1);\r\n        let size = food.selectedSize;\r\n        if (!size) size=null;\r\n        let sizeid = size===null? null : size.id;\r\n        let prices = toppingprice.filter((p) =>\r\n                (p.tcategoryid === null || tcategoryids.includes(p.tcategoryid)) &&\r\n                (p.toppingid ===null || p.toppingid === topping.toppingid) &&\r\n                (p.sizeid===null || p.sizeid === sizeid));\r\n        prices.sort().reverse();\r\n\r\n        if (prices.length>0){\r\n            let price=prices[0];\r\n            return [price.price*1, topping.count];\r\n        }\r\n        return [0, topping.count];\r\n    }\r\n\r\n    changeDeliveryMethod(method){\r\n        this.deliveryMethod=method;\r\n        this.updateTotal();\r\n    }\r\n    changePaymentMethod(method){\r\n        this.paymentMethod=method;\r\n        this.updateTotal();\r\n    }\r\n    removeFromCart(food) {\r\n        let i = this.cart.indexOf(food);\r\n        if (i>-1) {\r\n            if (this.cart[i].count > 1)\r\n                this.cart[i].count--;\r\n            else {\r\n                this.cart.splice(i, 1);\r\n            }\r\n            this.updateTotal()\r\n        }\r\n    }\r\n\r\n\r\n    findPriceByOptions(food, model, size, freeToppingCount) {\r\n        console.log(\"FTC: \" + freeToppingCount)\r\n        let price = null;\r\n        if (!model) model = null;\r\n        if (!size) size = null;\r\n        if (!food || !food.prices) return null;\r\n        if (!size && model)\r\n            price = food.prices.find(x => x.modelid === model.id && x.sizeid === \"0\");\r\n        if (size && !model)\r\n            price = food.prices.find(x => x.sizeid === size.id && x.modelid === \"0\");\r\n        if (model && size)\r\n            price = food.prices.find(x => x.sizeid === size.id && x.modelid === model.id);\r\n        if (food.prices.length===1)\r\n            price=food.prices[0];\r\n        if (!food.prices || food.prices.length===0){\r\n            Site.instance.showMessageBox(\"Error adding food to basket\", \"Error\", \"\")\r\n            return 9999;\r\n        }\r\n        food.toppings && food.toppings.forEach(topping =>{\r\n            if (!('count' in topping)) topping.count = topping.checked * 1;\r\n        });\r\n\r\n        let abbrsm = food.toppings? food.toppings.filter(topping =>\r\n              topping.checked * 1===1 && topping.count===0\r\n        ).map((topping) => `-${topping.abbr}`): [];\r\n        let abbrsp = food.toppings? food.toppings.filter(topping =>\r\n            topping.count-topping.checked * 1>0\r\n            ).map((topping) => `+${(topping.count-topping.checked * 1)===1?\"\":(topping.count-topping.checked * 1)}${topping.abbr}`):[];\r\n\r\n        let abbrs = abbrsm.concat(abbrsp);\r\n        food.toppingsabbr=abbrs.join(' ');\r\n        food.lesstoppings = (food.toppings? food.toppings.filter(topping =>\r\n            topping.checked * 1===1 && topping.count===0\r\n        ).map((topping) => `${topping.toppingid}`): []).join(',');\r\n        food.extratoppings = (food.toppings? food.toppings.filter(topping =>\r\n            topping.count-topping.checked * 1>0\r\n        ).map((topping) => `${topping.toppingid}`):[]).join(',');\r\n\r\n        let baseselected = food.toppings && food.toppings.filter(topping => topping.checked*1 > 0);\r\n        let selected = food.toppings && food.toppings.filter((topping) => topping.count > 0);\r\n        let basetpsList = [];\r\n        let tpsList = [];\r\n\r\n        baseselected && baseselected.forEach((t) => {\r\n            let p = this.findToppingPrice(food, t, Site.instance.foodinfo.toppingprice);\r\n            if (p) {\r\n                let tp = p[0];\r\n                basetpsList.push(tp);\r\n            }\r\n        })\r\n\r\n        selected && selected.forEach((t) => {\r\n            let p = this.findToppingPrice(food, t, Site.instance.foodinfo.toppingprice);\r\n            if (p) {\r\n                let tp = p[0];\r\n                let tc = p[1];\r\n                for (let i = 0; i < tc; i++) tpsList.push(tp);\r\n            }\r\n        })\r\n        tpsList.sort();\r\n\r\n        let freeCount = freeToppingCount - (baseselected? baseselected.length: 0)\r\n        let tpsListP = tpsList.slice(freeCount,tpsList.length);\r\n        let basetps = basetpsList.reduce((a, b) => a + b, 0)\r\n        let tps = tpsListP.reduce((a, b) => a + b, 0)\r\n        let tpsDiff = ((tps-basetps)>0)? tps-basetps : 0\r\n\r\n        let totalPrice = price ? Math.round((price.price * 1 + tpsDiff)*100)/100 : undefined;\r\n        return totalPrice;\r\n    }\r\n\r\n    computeFoodHash(food){\r\n        let f1 = JSON.parse(JSON.stringify(food));\r\n        delete f1.count\r\n        delete f1.prices\r\n        delete f1.toppings\r\n        if (food.details)\r\n            food.details.map((detail)=>{\r\n            delete detail.selectedFood.prices\r\n            delete detail.selectedFood.toppings\r\n        })\r\n        return Util.instance.hash(JSON.stringify(f1));\r\n    }\r\n\r\n    addOfferToCart(offer){\r\n        if (!offer.count) offer.count=1;\r\n        let extra = 0;\r\n        offer.details.map((detail)=>{\r\n            if (detail.selectedFood && detail.selectedFood.extraOfferPrice) extra+=detail.selectedFood.extraOfferPrice;\r\n            delete detail.selectedFood.prices\r\n            delete detail.selectedFood.toppings\r\n        })\r\n        offer.total =Math.round((offer.price*1 + extra)*100)/100\r\n        this.addToCartObject(offer);\r\n    }\r\n    addToCartWithOptions(foodToAdd) {\r\n        let food = foodToAdd ; //JSON.parse(JSON.stringify(foodToAdd));\r\n        let p = food.totalWithOptionPrice + (food.extraOfferPrice? food.extraOfferPrice: 0);\r\n        // p = this.findPriceByOptions(foodToAdd, foodToAdd.selectedModel, foodToAdd.selectedSize);\r\n        if (p===undefined)\r\n            return false;\r\n        food.total = Math.round(p*100)/100;\r\n        this.addToCartObject(food);\r\n        return true;\r\n\r\n    }\r\n    addToCartObject(food) {\r\n        if (!('count' in food)) food.count = 1;\r\n        delete food.prices\r\n        delete food.toppings\r\n\r\n        food.hash = this.computeFoodHash(food)\r\n        let foodexisted = this.cart.find(c => c.hash === food.hash);\r\n        let newcart = this.cart;\r\n        if (foodexisted)\r\n            foodexisted.count+=food.count;\r\n        else {\r\n            newcart = [...this.cart, food];\r\n            this.cart=newcart;\r\n        }\r\n        this.updateTotal()\r\n    }\r\n\r\n    deliveryChargeCalc(postcode, deliveryChargeRules, deliveryMethod) {\r\n        if (deliveryMethod === \"Pickup\") return 0;\r\n        if (!deliveryChargeRules || deliveryChargeRules === '' || !postcode) return 0;\r\n        if (!isNaN(deliveryChargeRules)) return deliveryChargeRules*1;\r\n        postcode = postcode.replace(\" \", \"\");\r\n        let lastDigit = 0;\r\n        for (let i = postcode.length - 1; i >= 0; i--)\r\n            if (!isNaN(postcode.charAt(i))) lastDigit = i;\r\n        let postcode1 = postcode.substring(0, postcode.length-lastDigit-1).toLowerCase();\r\n        let deliveryChargeRules2 = deliveryChargeRules.toLowerCase().replace(' ', '').split(\";\");\r\n        let charge = -1;\r\n        for (let i = 0; i < deliveryChargeRules2.length; i++) {\r\n            if (deliveryChargeRules2[i].indexOf(\":\") === -1) continue;\r\n            let d3 = deliveryChargeRules2[i].split(\":\");\r\n            if (d3[1] === '') continue;\r\n            if (d3[0].split(',').indexOf(postcode1) > -1) {\r\n                charge = d3[1] * 1;\r\n                break;\r\n            }\r\n        }\r\n        return charge;\r\n    }\r\n\r\n\r\n    setDeliveryAddress(address){\r\n        this.deliveryAddress.person=address.person;\r\n        this.deliveryAddress.address=address.address;\r\n        this.deliveryAddress.postcode=address.postcode;\r\n        this.deliveryAddress.city=address.city;\r\n        this.deliveryAddress.phone=address.phone;\r\n    }\r\n    updateTotal() {\r\n        this.subtotal= Math.round(this.cart.reduce((a, b) => a * 1 + b.total * b.count, 0)*100)/100\r\n        this.totalCartFoodCount = this.cart.reduce((a, b) => a * 1 + b.count, 0)\r\n        let totalOffers = Math.round(this.cart.filter(item=> 'details' in item).reduce((a, b) => a * 1 + b.total * b.count, 0)*100)/100\r\n        this.deliveryCharge = Math.round(this.getDeliveryCharge(this.deliveryMethod)*100)/100;\r\n        this.discount=0;\r\n        if (!isNaN(Site.instance.site.online_discount))\r\n            this.discount=(Math.floor((this.subtotal-totalOffers) *Site.instance.site.online_discount)/100).toFixed(2)*1;\r\n        this.totalCartValue=this.subtotal-this.discount+Math.max(0, this.deliveryCharge);\r\n        this.totalCartValue=Math.round(this.totalCartValue*100)/100;\r\n        this.cartSubject.next(\"changed\");\r\n    //    console.log(\"cart totalcartvalue: \" + this.totalCartValue);\r\n    }\r\n    getDeliveryCharge(deliveryMethod){\r\n        let deliveryCharge =0;\r\n        let postcode = this.deliveryAddress && this.deliveryAddress.postcode && this.deliveryAddress.postcode!==\"\" ? this.deliveryAddress.postcode :\r\n            Site.instance.auth && Site.instance.auth.postcode && Site.instance.auth.postcode!==\"\" ? Site.instance.auth.postcode : \"\";\r\n        if (deliveryMethod === \"Delivery\" && postcode !== '')\r\n            deliveryCharge = this.deliveryChargeCalc(postcode, Site.instance.site.delivery_charge, deliveryMethod);\r\n        return deliveryCharge;\r\n    }\r\n\r\n    checkBeforeCheckoutProceed(){\r\n        if (Cart.instance.totalCartValue<Site.instance.site.minorder*1){\r\n            Site.instance.showToast(\"Minimum order is \" + Util.instance.formatPrice(Site.instance.site.minorder), \"error\", \"bottom\");\r\n            return false;\r\n        }\r\n        if (Site.instance.site.shopStatus!==\"open\" && !Site.instance.isTestOrder()){\r\n            Site.instance.showToast(\"Sorry! We are closed now.\", \"error\", \"bottom\");\r\n            return false;\r\n        }\r\n        //check for 1/4\r\n        let halfMeterCount=0;\r\n        Cart.instance.cart.forEach((f)=>{\r\n            if (f.selectedSize && f.selectedSize.abr && f.selectedSize.abr.indexOf('1/4')>-1)\r\n                halfMeterCount+=f.count;\r\n            if (f.details){\r\n                f.details.forEach((d)=>{\r\n                    if (d.selectedFood) {\r\n                        let f1=d.selectedFood\r\n                        if (f1.selectedSize && f1.selectedSize.abr && f1.selectedSize.abr.indexOf('1/4')>-1)\r\n                            halfMeterCount+=f.count;\r\n                    }\r\n                })\r\n            }\r\n        })\r\n        if (halfMeterCount%2===1){\r\n            // cannot checkout\r\n            Site.instance.showToast(\"You must choose another Half meter pizza!\", \"error\", \"bottom\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n\r\n}","import React from 'react';\r\nimport {createMuiTheme, makeStyles, MuiThemeProvider} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Grid,\r\n    Button, BottomNavigation, Snackbar, Container\r\n} from \"@material-ui/core\";\r\nimport {Alert} from \"@material-ui/lab\";\r\nimport Site from \"./service/Site\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    toolbar: {\r\n        flexGrow: 1,\r\n        color: 'white',\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n}));\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        error: {\r\n            main: \"#ff604f\"\r\n        }\r\n    }\r\n})\r\n\r\nclass Toast extends React.Component {\r\n    timer;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            show:false,\r\n            toastMsg: \"\",\r\n            toastType: \"\",\r\n            toastTopBottom: \"\"\r\n        }\r\n        Site.instance.toastSubject.subscribe((toast)=>{\r\n            if (toast.msg){\r\n                if (this.state.show) {\r\n                    this.setState({show: false}, () => {\r\n                        Site.instance.toastSubject.next(toast);\r\n                    })\r\n                    return\r\n                }else {\r\n                    this.setState({\r\n                        show: true,\r\n                        toastMsg: toast.msg,\r\n                        toastType: toast.type,\r\n                        toastTopBottom: toast.position\r\n                    });\r\n                }\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.show &&\r\n\r\n                <Snackbar open autoHideDuration={6000}\r\n                          anchorOrigin={{vertical: this.state.toastTopBottom, horizontal: \"center\"}}\r\n                          onClose={() => {\r\n                              this.setState({show: false});\r\n                          }}>\r\n\r\n                    <Alert onClose={() => {\r\n                        this.setState({show: false});\r\n                    }} severity={this.state.toastType ? this.state.toastType : \"success\"}>\r\n                        {this.state.toastMsg}\r\n                    </Alert>\r\n                </Snackbar>\r\n                }\r\n                    </React.Fragment>\r\n\r\n    );\r\n    }\r\n}\r\n\r\nexport default Toast;","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Grid,\r\n    Button, BottomNavigation\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport AppContext from '../AppContext'\r\nimport Util from './service/Util.js'\r\nimport Cart from \"./service/Cart\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    toolbar: {\r\n        flexGrow: 1,\r\n        color: 'white',\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n}));\r\n\r\nclass BottomBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            totalCartValue:0,\r\n            totalCartFoodCount:0\r\n        }\r\n        Cart.instance.cartSubject.subscribe(()=>{\r\n            console.log(\"totalcartvalue: \" + Cart.instance.totalCartValue);\r\n            this.setState({totalCartValue: Cart.instance.totalCartValue, totalCartFoodCount: Cart.instance.totalCartFoodCount})\r\n        })\r\n    }\r\n    render() {\r\n        let onShowCartDialog = this.props.onShowCartDialog;\r\n        return (\r\n            this.state.totalCartFoodCount>0&&\r\n                    <BottomNavigation\r\n                        style={{\r\n                            width: '100%',\r\n                            position: 'sticky',\r\n                            bottom: 0,\r\n                            zIndex: 200,\r\n                            marginTop: 5,\r\n                            borderTop: \"1px dotted red\",\r\n                        }}>\r\n                        <Grid justify=\"center\" container\r\n                              spacing={0}\r\n                              direction=\"row\"\r\n                              alignItems=\"center\"\r\n                        >\r\n                            <Badge badgeContent={this.state.totalCartFoodCount} color=\"secondary\"\r\n                                   onClick={() => {\r\n                                       Cart.instance.showDialogSubject.next({name: \"CartDialog\", show: true})\r\n                                   }}>\r\n                                {Util.instance.formatPrice(this.state.totalCartValue)}\r\n                                <ShoppingBasketOutlined/>\r\n                            </Badge>\r\n                            <Button style={{position: \"absolute\", right: 0}} onClick={()=>{\r\n                                Cart.instance.showDialogSubject.next({name: \"CartDialog\", show: true})\r\n                            }}\r\n                                    color={\"secondary\"}>CART < ArrowForwardIosIcon/></Button>\r\n                        </Grid>\r\n                    </BottomNavigation>\r\n        );\r\n    }\r\n}\r\n\r\nexport default BottomBar;","import React from 'react';\r\nimport {makeStyles, MuiThemeProvider} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Container, BottomNavigation, Grid, Box, Button, Dialog, DialogActions\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport AppContext from '../AppContext'\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\r\nimport Util from './service/Util.js'\r\nimport Cart from './service/Cart.js'\r\nimport Site from './service/Site.js'\r\n\r\nclass CartDialog extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            show:false,\r\n            cartChanged:''\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name && e.name===\"CartDialog\")\r\n                this.setState({show:e.show});\r\n        })\r\n        Cart.instance.cartSubject.subscribe(()=>{\r\n                this.setState({cartChanged:''});\r\n        })\r\n    }\r\n    handleCheckout(){\r\n\r\n        if (!Cart.instance.checkBeforeCheckoutProceed())\r\n            return;\r\n\r\n        if (Site.instance.isLogin()) {\r\n            this.setState({show: false});\r\n            Cart.instance.showDialogSubject.next({\r\n                name: \"DeliveryDialog\",\r\n                show: true\r\n            })\r\n        }else{\r\n            Cart.instance.showDialogSubject.next({\r\n                name: \"LoginDialog\",\r\n                show: true\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.state.show &&\r\n                    <Dialog fullWidth={true}\r\n                            open={true} onClose={() => this.setState({show:false})}\r\n                            className=\"minWidth300\"\r\n                    >\r\n                        <Grid container\r\n                              spacing={0}\r\n                              direction=\"column\"\r\n                              alignItems=\"center\"\r\n                              justify=\"flex-start\"\r\n                              alignContent={\"center\"}\r\n                        >\r\n                            <Container maxWidth=\"md\" style={{margin: \"0\", padding: \"0\"}} id=\"container1\">\r\n                        <AppBar position={\"sticky\"}>\r\n                            <Toolbar>\r\n                                <IconButton edge=\"start\" color=\"inherit\"\r\n                                            onClick={() => this.setState({show:false})}\r\n                                            aria-label=\"close\">\r\n                                    <CloseIcon/>\r\n                                </IconButton>\r\n                                <Typography variant=\"h6\" style={{flexGrow: 1}}>\r\n                                    Your Order\r\n                                </Typography>\r\n                            </Toolbar>\r\n                        </AppBar>\r\n                        <Container maxWidth=\"md\" style={{padding: 15, marginBottom: 80}}>\r\n                            {Cart.instance.cart.map((food) => (\r\n                                <div style={{\r\n                                    position: \"relative\",\r\n                                    paddingBottom: 12,\r\n                                    borderBottom: \"dotted 1px\"\r\n                                }} key={food.hash}>\r\n                                    <div style={{\r\n                                        position: \"absolute\",\r\n                                        right: 0,\r\n                                        top: 0,\r\n                                        display: \"flex\",\r\n                                        flexDirection: \"row\"\r\n                                    }}>\r\n                                        <span>{Util.instance.formatPrice(food.total * food.count)}</span>\r\n                                        <IconButton aria-label=\"remove-from-cart\"\r\n                                                    style={{padding: 2, zIndex: 100}} key=\"food.foodid\"\r\n                                                    onClick={() => Cart.instance.removeFromCart(food)}>\r\n                                            <DeleteForeverIcon/>\r\n                                        </IconButton>\r\n                                    </div>\r\n                                    <div style={{position: \"relative\", left: 0, top: 0}}>\r\n                                        <Typography variant=\"subtitle1\" gutterBottom>\r\n                                            {Util.instance.padnumber(food.count, 2)}x {food.title}</Typography>\r\n                                        <Typography variant=\"caption\">\r\n                                            {food.toppings ?\r\n                                                food.toppings.filter((t) => t.checked * 1 === 1).map((topping) => (\r\n                                                    `${topping.title}`\r\n                                                )).join(' ◦ ')\r\n                                                : \"\"\r\n                                            }\r\n                                        </Typography>\r\n\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            <div style={{\r\n                                position: \"relative\",\r\n                                paddingBottom: 12,\r\n                                borderTop: \"dotted 3px white\"\r\n                            }}>\r\n                                <div style={{\r\n                                    position: \"absolute\",\r\n                                    right: 0,\r\n                                    top: 0,\r\n                                    display: \"flex\",\r\n                                    flexDirection: \"column\",\r\n                                    textAlign: \"right\"\r\n                                }}>\r\n                                    <span>Subtotal: {Util.instance.formatPrice(Cart.instance.subtotal)}</span>\r\n                                    {\r\n                                        Cart.instance.discount > 0 &&\r\n                                        <span>Discount: {Util.instance.formatPrice(Cart.instance.discount)}</span>\r\n                                    }\r\n                                    {\r\n                                        Cart.instance.deliveryCharge > 0 &&\r\n                                    <span>Delivery Charge : {Util.instance.formatPrice(Cart.instance.deliveryCharge)}</span>\r\n                                    }\r\n                                    <span\r\n                                        style={{fontWeight: \"bold\"}}>Total: {Util.instance.formatPrice(Cart.instance.totalCartValue)}</span>\r\n                                </div>\r\n                            </div>\r\n                        </Container>\r\n                        <DialogActions style={{ position:\"sticky\", bottom:0,zIndex: 200,\r\n                            marginTop: 0,\r\n                            borderTop: \"1px dotted red\",\r\n                            textAlign:\"center\",\r\n                            backgroundColor:\"white\",\r\n                            height:40}}>\r\n                                <Button style={{position: \"absolute\", left: 0}} color={\"secondary\"}\r\n                                        onClick={() => {\r\n                                            this.setState({show:false})\r\n                                        }}>< ArrowBackIosIcon/> MENU </Button>\r\n                                <Box component=\"span\" m={1} style={{ margin: \"0 auto\"}}>\r\n                                    {Util.instance.formatPrice(Cart.instance.totalCartValue)}\r\n                                </Box>\r\n                                <Button style={{position: \"absolute\", right: 0}} color={\"secondary\"}\r\n                                        disabled={Cart.instance.totalCartValue===0}\r\n                                        onClick={() => {\r\n                                            this.handleCheckout();\r\n                                        }}>CHECKOUT < ArrowForwardIosIcon/></Button>\r\n                        </DialogActions>\r\n                            </Container></Grid>\r\n                    </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CartDialog;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport {\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Drawer,\r\n    TextField,\r\n    ListItemSecondaryAction,\r\n    Switch, AppBar, Toolbar, IconButton, Typography, Grid, Container, Snackbar\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport CheckOutlinedIcon from \"@material-ui/icons/CheckOutlined\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Cart from \"./service/Cart\";\r\nimport Util from \"./service/Util\";\r\nimport Site from \"./service/Site\";\r\nimport {Alert} from \"@material-ui/lab\";\r\n\r\nclass DeliveryDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            useDifferentAddress: false,\r\n            showDeliveryDrawer: false,\r\n            showPaymentDrawer: false,\r\n            show:false,\r\n            cartChanged:'',\r\n            deliveryAddress_postcode:'',\r\n            deliveryAddress_address1:'',\r\n            deliveryAddress_address2:'',\r\n            deliveryAddress_person:'',\r\n            deliveryAddress_city:'',\r\n            deliveryAddress_addressnote:'',\r\n            deliveryAddress_phone:'',\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name && (e.name===\"DeliveryDialog\" || e.name===\"*\"))\r\n                this.setState({show:e.show});\r\n        })\r\n        Cart.instance.cartSubject.subscribe(()=>{\r\n//            console.log(\"deliveryCharge \" + Cart.instance.deliveryCharge);\r\n                this.setState({cartChanged:''});\r\n        })\r\n        Site.instance.authSubject.subscribe(()=>{\r\n            this.changeDeliveryMethod(\"Delivery\");\r\n            this.changePaymentMethod(\"Online\");\r\n            this.setState({cartChanged:''});\r\n        })\r\n    }\r\n\r\n    handlePlaceOrder() {\r\n        if (this.state.useDifferentAddress){\r\n            if (!Site.instance.checkPostCode(this.state.deliveryAddress_postcode)){\r\n                Site.instance.showToast(\"Invalid postcode\", \"error\", \"bottom\")\r\n                return;\r\n            }\r\n            Cart.instance.deliveryAddress.postcode=this.state.deliveryAddress_postcode;\r\n            Cart.instance.deliveryAddress.address1=this.state.deliveryAddress_address1;\r\n            Cart.instance.deliveryAddress.address2=this.state.deliveryAddress_address2;\r\n            Cart.instance.deliveryAddress.person=this.state.deliveryAddress_person;\r\n            Cart.instance.deliveryAddress.city=this.state.deliveryAddress_city;\r\n            Cart.instance.deliveryAddress.addressnote=this.state.deliveryAddress_addressnote;\r\n            Cart.instance.deliveryAddress.phone=this.state.deliveryAddress_phone;\r\n        }else{\r\n            Cart.instance.deliveryAddress.postcode='';\r\n            Cart.instance.deliveryAddress.address1='';\r\n            Cart.instance.deliveryAddress.address2='';\r\n            Cart.instance.deliveryAddress.person='';\r\n            Cart.instance.deliveryAddress.city='';\r\n            Cart.instance.deliveryAddress.addressnote='';\r\n            Cart.instance.deliveryAddress.phone='';\r\n        }\r\n        Cart.instance.updateTotal();\r\n        if (Cart.instance.deliveryCharge>-1) {\r\n            this.setState({show: false})\r\n            Cart.instance.showDialogSubject.next({\r\n                name: \"PaymentDialog\",\r\n                show: true\r\n            })\r\n        }else{\r\n            Site.instance.showToast(\"Sorry! We cannot deliver to your address.\", \"error\", \"bottom\")\r\n        }\r\n\r\n    }\r\n\r\n    changeDeliveryMethod(method) {\r\n        Cart.instance.changeDeliveryMethod(method);\r\n        this.setState({showDeliveryDrawer: false});\r\n    }\r\n    changePaymentMethod(method) {\r\n        Cart.instance.changePaymentMethod(method);\r\n        this.setState({showPaymentDrawer: false});\r\n    }\r\n\r\n    render()\r\n        {\r\n            let auth = Site.instance.auth;\r\n            return (\r\n                this.state.show &&\r\n                        <React.Fragment>\r\n                        <Dialog open fullWidth={true} onClose={() => this.setState({show:false})}\r\n                                className=\"minWidth300\"\r\n                                style={{maxWidth: '960px', margin: '0 auto', minWidth:300}}\r\n                        >\r\n                            <AppBar position={\"static\"}>\r\n                                <Toolbar>\r\n                                    <IconButton edge=\"start\" color=\"inherit\"\r\n                                                onClick={() => this.setState({show:false})}\r\n                                                aria-label=\"close\">\r\n                                        <CloseIcon/>\r\n                                    </IconButton>\r\n                                    <Typography variant=\"h6\" style={{flexGrow: 1}}>\r\n                                        Delivery Details\r\n                                    </Typography>\r\n                                </Toolbar>\r\n                            </AppBar>\r\n                            <DialogContent>\r\n                                <List>\r\n                                    <ListItem button   selected onClick={() => this.setState({showDeliveryDrawer: true})}\r\n                                              style={{ marginBottom: 5, marginTop: 5}}>\r\n                                        <ListItemText primary={\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <div style={{flexGrow: 1}}>Delivery</div>\r\n                                                <span>{Cart.instance.deliveryMethod}</span>\r\n                                                <ArrowForwardIosIcon/>\r\n                                            </div>\r\n                                        }/>\r\n                                    </ListItem>\r\n                                    <ListItem button selected onClick={() => this.setState({showPaymentDrawer: true})}\r\n                                              style={{ marginBottom: 5, marginTop: 5}}>\r\n                                        <ListItemText primary={\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <div style={{flexGrow: 1}}>Payment</div>\r\n                                                <span>{Cart.instance.paymentMethod}</span>\r\n                                                <ArrowForwardIosIcon/>\r\n                                            </div>\r\n                                        }/>\r\n                                    </ListItem>\r\n                                    { Cart.instance.deliveryCharge > 0 &&\r\n                                    <ListItem selected style={{marginBottom: 5, marginTop: 5}}>\r\n                                        <ListItemText primary={\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <div style={{flexGrow: 1}}>Delivery Charge</div>\r\n                                                <span>{Util.instance.formatPrice(Cart.instance.deliveryCharge)}</span>\r\n                                            </div>\r\n                                        }/>\r\n                                    </ListItem>\r\n                                    }\r\n\r\n                                    <ListItem selected>\r\n                                        <ListItemText primary={Cart.instance.deliveryMethod === \"Pickup\" ? \"Collection from\" : \"Delivery to\"}\r\n                                                      secondary=\r\n                                                          {\r\n                                                              Cart.instance.deliveryMethod === \"Pickup\" ?\r\n                                                                  <span style={{whiteSpace: \"pre-line\"}}>{Site.instance.sitename} {\"\\n\"}{Site.instance.site.address}</span>\r\n                                                                  :\r\n                                                                  <React.Fragment>\r\n                                                          {!this.state.useDifferentAddress &&\r\n                                                              <React.Fragment>\r\n                                                                  <span\r\n                                                              style={{whiteSpace: \"pre-line\"}}>{auth.firstname} {auth.lastname} {\"\\n\"}\r\n                                                              {auth.flatnumber} {auth.housename} {auth.housenumer}\r\n                                                              {auth.street} {auth.town}{\"\\n\"}\r\n                                                              {auth.postcode}{\"\\n\"}\r\n                                                              {auth.addressnotes}\r\n                                                              </span>\r\n\r\n                                                              </React.Fragment>\r\n                                                          }\r\n                                                          {this.state.useDifferentAddress &&\r\n                                                              <React.Fragment>\r\n                                                                  <form noValidate >\r\n                                                                  <TextField\r\n                                                                      autoFocus\r\n                                                                      margin=\"dense\"\r\n                                                                      label=\"Name\"\r\n                                                                      type=\"text\"\r\n                                                                      fullWidth\r\n                                                                      size=\"small\"\r\n                                                                      value={this.state.deliveryAddress_person}\r\n                                                                      onChange={(e)=>{\r\n                                                                          e.preventDefault();\r\n                                                                          this.setState({deliveryAddress_person: e.target.value});\r\n                                                                      }}\r\n                                                                  />\r\n                                                                  <TextField\r\n                                                                      margin=\"dense\"\r\n                                                                      label=\"Address 1\"\r\n                                                                      type=\"text\"\r\n                                                                      fullWidth\r\n                                                                      size=\"small\"\r\n                                                                      value={this.state.deliveryAddress_address1}\r\n                                                                      onChange={(e)=>{\r\n                                                                          e.preventDefault();\r\n                                                                          this.setState({deliveryAddress_address1: e.target.value});\r\n                                                                      }}\r\n                                                                  />\r\n                                                                  <TextField\r\n                                                                      margin=\"dense\"\r\n                                                                      label=\"Address 2\"\r\n                                                                      type=\"text\"\r\n                                                                      fullWidth\r\n                                                                      size=\"small\"\r\n                                                                      value={this.state.deliveryAddress_address2}\r\n                                                                      onChange={(e)=>{\r\n                                                                          e.preventDefault();\r\n                                                                          this.setState({deliveryAddress_address2: e.target.value});\r\n                                                                      }}\r\n                                                                  />\r\n                                                                  <TextField\r\n                                                                      margin=\"dense\"\r\n                                                                      label=\"City\"\r\n                                                                      type=\"text\"\r\n                                                                      size=\"small\"\r\n                                                                      fullWidth\r\n                                                                      value={this.state.deliveryAddress_city}\r\n                                                                      onChange={(e)=>{\r\n                                                                          e.preventDefault();\r\n                                                                          this.setState({deliveryAddress_city: e.target.value});\r\n                                                                      }}\r\n                                                                  />\r\n                                                                  <TextField\r\n                                                                      margin=\"dense\"\r\n                                                                      label=\"Postcode\"\r\n                                                                      type=\"text\"\r\n                                                                      size=\"small\"\r\n                                                                      fullWidth\r\n                                                                      value={this.state.deliveryAddress_postcode}\r\n                                                                      onChange={(e)=>{\r\n                                                                          e.preventDefault();\r\n                                                                          this.setState({deliveryAddress_postcode: e.target.value});\r\n                                                                      }}\r\n                                                                  />\r\n                                                                  <TextField\r\n                                                                      margin=\"dense\"\r\n                                                                      label=\"Phone\"\r\n                                                                      type=\"text\"\r\n                                                                      fullWidth\r\n                                                                      size=\"small\"\r\n                                                                      onChange={(e)=>{\r\n                                                                          e.preventDefault();\r\n                                                                          this.setState({deliveryAddress_phone: e.target.value});\r\n                                                                      }}\r\n                                                                      value={this.state.deliveryAddress_phone}\r\n                                                                  />\r\n                                                                  <TextField\r\n                                                                      margin=\"dense\"\r\n                                                                      label=\"Address Note\"\r\n                                                                      type=\"text\"\r\n                                                                      fullWidth\r\n                                                                      size=\"small\"\r\n                                                                      value={this.state.deliveryAddress_addressnote}\r\n                                                                      onChange={(e)=>{\r\n                                                                          e.preventDefault();\r\n                                                                          this.setState({deliveryAddress_addressnote: e.target.value});\r\n                                                                      }}\r\n                                                                  />\r\n                                                                  </form>\r\n                                                              </React.Fragment>\r\n                                                          }\r\n                                                                  </React.Fragment>\r\n                                                          } />\r\n\r\n                                    </ListItem>\r\n                                    {Cart.instance.deliveryMethod === \"Delivery\" &&\r\n                                    <ListItem selected>\r\n                                        <ListItemText primary={\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <div style={{flexGrow: 1}}></div>\r\n                                                <Button onClick={() => {\r\n                                                    Cart.instance.showDialogSubject.next({name: \"ProfileDialog\", show: true})\r\n                                                }}>Update Address\r\n                                                    <ArrowForwardIosIcon/>\r\n                                                </Button>\r\n                                            </div>\r\n                                        }/>\r\n                                    </ListItem>\r\n                                    }\r\n                                    {\r\n                                        false && Cart.instance.deliveryMethod === \"Delivery\" &&\r\n                                        <ListItem selected>\r\n                                            <ListItemText primary=\"Use Different Address\" />\r\n                                            <ListItemSecondaryAction>\r\n                                                <Switch\r\n                                                    edge=\"end\"\r\n                                                    onChange={() => {\r\n                                                            this.setState({useDifferentAddress: !this.state.useDifferentAddress})\r\n                                                        }\r\n                                                    }\r\n                                                    checked={this.state.useDifferentAddress}\r\n                                                />\r\n                                            </ListItemSecondaryAction>\r\n                                        </ListItem>\r\n                                    }\r\n                                </List>\r\n                                {Cart.instance.deliveryCharge === -1 &&\r\n                                <Alert  severity=\"error\">Sorry! We cannot deliver to your address.</Alert>\r\n                                }\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button color=\"secondary\" onClick={() => {\r\n                                    this.setState({show:false})\r\n                                }}>Cancel</Button>\r\n                                <Button color=\"secondary\" onClick={() => {\r\n                                    this.handlePlaceOrder()\r\n                                }} disabled={Cart.instance.deliveryCharge===-1 || Cart.instance.cart.totalCartValue<=0}>\r\n                                    { Cart.instance.paymentMethod===\"Online\"?\r\n                                        \"Pay\": \"Place Order\"}\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </Dialog>\r\n                            <Drawer anchor=\"bottom\"\r\n                                    style={{ maxWidth: '960px'}}\r\n                                    open={this.state.showDeliveryDrawer}\r\n                                    onClose={() => this.setState({showDeliveryDrawer: false})}\r\n                                    PaperProps={{ style: { maxWidth: 500, margin: \"0 auto\"}}}\r\n                            >\r\n\r\n                                <List>\r\n                                    <ListItem button onClick={() => this.changeDeliveryMethod(\"Delivery\")}>\r\n                                        <ListItemText primary={\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <div style={{flexGrow: 1}}>Delivery to My Address</div>\r\n                                                {  Cart.instance.deliveryMethod === \"Delivery\" &&\r\n                                                <CheckOutlinedIcon color=\"disabled\"/>\r\n                                                }\r\n                                            </div>\r\n                                        }/>\r\n                                    </ListItem>\r\n                                    <ListItem button onClick={() => this.changeDeliveryMethod(\"Pickup\")}>\r\n                                        <ListItemText primary={\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <div style={{flexGrow: 1}}>Collection from Restaurant</div>\r\n                                                { Cart.instance.deliveryMethod === \"Pickup\" &&\r\n                                                <CheckOutlinedIcon color=\"disabled\"/>\r\n                                                }\r\n                                            </div>\r\n                                        }/>\r\n                                    </ListItem>\r\n                                </List>\r\n                            </Drawer>\r\n                            <Drawer anchor=\"bottom\"\r\n                                    open={this.state.showPaymentDrawer}\r\n                                    onClose={() => this.setState({showPaymentDrawer: false})}\r\n                                    PaperProps={{ style: { maxWidth: 500, margin: \"0 auto\"}}}\r\n                            >\r\n                                <List>\r\n                                    {Site.instance.site.payment.toLowerCase().includes(\"paypal\") &&\r\n                                    <ListItem button onClick={() => this.changePaymentMethod(\"Online\")}>\r\n                                        <ListItemText primary={\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <div style={{flexGrow: 1}}>Pay Online</div>\r\n                                                {Cart.instance.paymentMethod === \"Online\" &&\r\n                                                <CheckOutlinedIcon color=\"disabled\"/>\r\n                                                }\r\n                                            </div>}/>\r\n                                    </ListItem>\r\n                                    }\r\n                                    {Site.instance.site.payment.toLowerCase().includes(\"cash\") &&\r\n                                    <ListItem button onClick={() => this.changePaymentMethod(\"Cash\")}>\r\n                                        <ListItemText primary={\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <div style={{flexGrow: 1}}>Cash</div>\r\n                                                {Cart.instance.paymentMethod === \"Cash\" &&\r\n                                                <CheckOutlinedIcon color=\"disabled\"/>\r\n                                                }\r\n                                            </div>\r\n                                        }/>\r\n                                    </ListItem>\r\n                                    }\r\n                                </List>\r\n                            </Drawer>\r\n\r\n                        </React.Fragment>\r\n            );\r\n        }\r\n}\r\n\r\nexport default DeliveryDialog;","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Paper,\r\n    Toolbar,\r\n\r\n    Link,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    ListItemSecondaryAction,\r\n    AccordionDetails,\r\n    AccordionSummary,\r\n    Accordion,\r\n    LinearProgress,\r\n    Container, Grid, MenuList, MenuItem, Button, DialogContent, CircularProgress, TextField\r\n} from \"@material-ui/core\";\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Util from './service/Util';\r\nimport Site from './service/Site';\r\nimport NewReleasesOutlinedIcon from \"@material-ui/icons/NewReleasesOutlined\";\r\nimport Cart from \"./service/Cart\";\r\n\r\nclass RegisterCustomer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            termsAccept: false,\r\n            planid: ''\r\n        }\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n    }\r\n    componentDidMount() {\r\n    }\r\n\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        let u = new URLSearchParams(window.location.href).get(\"u\")\r\n\r\n        return (\r\n            <Grid container spacing={1} style={{minHeight:\"100%\", marginTop:50, marginBottom:50}} className=\"gridNoMargin background1\"   justify=\"center\"\r\n            >\r\n                <Grid item xs={12} sm={6} md={6} style={{ zIndex:10}} >\r\n                    <Paper style={{ padding: 10, textAlign: \"left\", minHeight: 120, position:\"relative\",\r\n                        backgroundColor:\"#FFF\"\r\n                    }} elevation={3}>\r\n                        <div style={{textAlign: \"center\"}}>\r\n                        <Typography style={{fontWeight: \"bold\", marginBottom: 5}} variant=\"text\">\r\n                            Commander VPN\r\n                        </Typography>\r\n                        </div>\r\n{/*\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                label=\"Username\"\r\n                                fullWidth\r\n                                required\r\n                                inputRef={e => this.fullName= e}\r\n                                value={u}\r\n                            />\r\n*/}\r\n\r\n                                    <List style={{ textAlign: \"right\"}}>\r\n                                        <ListItem button disablePadding onClick={()=>{\r\n                                            alert(\"خرید1\")\r\n                                        }}>\r\n                                            <ListItemText primary={\"یکماهه\"}\r\n                                                          secondary={\" 20 هزار تومان\"}/>\r\n                                        </ListItem>\r\n                                        <ListItem button disablePadding onClick={()=>{\r\n                                            alert(\"خرید2\")\r\n                                        }}>\r\n                                            <ListItemText primary={\"سه ماهه\"}\r\n                                                          secondary={\" 50 هزار تومان\"}/>\r\n                                        </ListItem>\r\n                                        <ListItem button disablePadding onClick={()=>{\r\n                                            alert(\"خرید3\")\r\n                                        }}>\r\n                                            <ListItemText primary={\"شش ماهه\"}\r\n                                                          secondary={\" 90 هزار تومان\"}/>\r\n                                        </ListItem>\r\n                                    </List>\r\n\r\n\r\n\r\n{/*\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    inputRef={e => this.termsAccept = e}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label={\r\n                                <React.Fragment>\r\n                                    <span>I agree with</span>{\" \"}\r\n                                    <Link onClick={() => {\r\n                                        Site.instance.showMessageBox(document.getElementById('terms').innerHTML, \"Terms and Conditions\", \"\")\r\n                                        return false\r\n                                    }}>the terms and conditions</Link>\r\n                                </React.Fragment>\r\n                            }\r\n                        />\r\n                            <Button variant={\"contained\"} color={\"primary\"} fullWidth>خرید</Button>\r\n*/}\r\n\r\n\r\n                    </Paper>\r\n\r\n                </Grid>\r\n    </Grid>\r\n\r\n    );\r\n    }\r\n}\r\n\r\nexport default RegisterCustomer;\r\n","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Link,\r\n    DialogTitle, DialogContent, DialogContentText, TextField, DialogActions, Button, Dialog\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport AppContext from '../AppContext'\r\nimport Site from './service/Site'\r\nimport Cart from \"./service/Cart\";\r\nimport Util from \"./service/Util\";\r\n\r\n\r\nclass LoginDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false,\r\n            showForRegister: false,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name && e.name===\"LoginDialog\")\r\n                this.setState({show:e.show, showForRegister:false});\r\n        })\r\n    }\r\n\r\n    handleRegisterClick() {\r\n        if (!this.state.showForRegister) {\r\n            this.setState({showForRegister: true}, ()=>{\r\n                this.registerEmail.focus();\r\n            })\r\n\r\n        }\r\n        else if (this.state.showForRegister) {\r\n            if (this.registerEmail2.value !== this.registerEmail.value) {\r\n                this.registerEmail.focus()\r\n                Site.instance.showToast(\"Confirm your email address\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (!Util.instance.validateEmail(this.registerEmail.value)) {\r\n                Site.instance.showToast(\"Invalid email address\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (this.registerPass.value ===\"\") {\r\n                this.registerPass.focus()\r\n                Site.instance.showToast(\"Enter your password\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (this.registerPass.value !== this.registerPass2.value) {\r\n                this.registerPass.focus()\r\n                Site.instance.showToast(\"Confirm your password\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (this.registerFirstname.value===\"\") {\r\n                this.registerFirstname.focus()\r\n                Site.instance.showToast(\"Enter your first name\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (this.registerLastname.value===\"\") {\r\n                this.registerLastname.focus()\r\n                Site.instance.showToast(\"Enter your last name\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (this.registerPhone.value===\"\") {\r\n                this.registerPhone.focus()\r\n                Site.instance.showToast(\"Enter your phone number\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (this.registerStreet.value===\"\") {\r\n                this.registerStreet.focus()\r\n                Site.instance.showToast(\"Enter address line\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (this.registerTown.value===\"\") {\r\n                this.registerTown.focus()\r\n                Site.instance.showToast(\"Enter town\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n            if (this.registerPostcode.value===\"\" || !Site.instance.checkPostCode(this.registerPostcode.value)) {\r\n                this.registerPostcode.focus()\r\n                Site.instance.showToast(\"Enter valid Postcode\", \"error\", \"bottom\");\r\n                return;\r\n            }\r\n\r\n\r\n            let data = {};\r\n            data.email = this.registerEmail.value;\r\n            data.password = this.registerPass.value;\r\n            data.phone = this.registerPhone.value;\r\n            data.firstname = this.registerFirstname.value;\r\n            data.lastname = this.registerLastname.value;\r\n            data.postcode =  this.registerPostcode.value;\r\n//            data.flatnumber = this.registerFlatnumber.value;\r\n//            data.housenumber = this.registerHousenumber.value;\r\n//            data.housename = this.registerHousename.value;\r\n            data.street = this.registerStreet.value;\r\n            data.town = this.registerTown.value;\r\n            data.addressnotes = this.registerAddressnotes.value;\r\n            Site.instance.registerUser(data, (result, msg)=>{\r\n                if (result===1) {\r\n                    this.setState({show: false})\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    checkAuth(){\r\n        Site.instance.checkAuth(this.loginEmail.value, this.loginPass.value, (result, msg)=>{\r\n            if (result===0)\r\n                Site.instance.showToast(\"Login Error \" + msg, \"error\", \"bottom\");\r\n            else if (result===1){\r\n                this.setState({show:false})\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        return (\r\n            this.state.show &&\r\n                    <Dialog open fullScreen={false} onClose={() => this.setState({show:false})}>\r\n                        <DialogTitle>{!this.state.showForRegister ? \"Login\" : \"Register\"}</DialogTitle>\r\n                        {!this.state.showForRegister ?\r\n                            <DialogContent>\r\n                                    <TextField\r\n                                        autoFocus\r\n                                        size=\"small\"\r\n                                        margin=\"dense\"\r\n                                        id=\"email\"\r\n                                        label=\"Email Address\"\r\n                                        type=\"email\"\r\n                                        fullWidth\r\n                                        inputRef={e => this.loginEmail = e}\r\n                                    />\r\n                                <TextField\r\n                                    margin=\"dense\"\r\n                                    size=\"small\"\r\n                                    id=\"pass\"\r\n                                    label=\"Password\"\r\n                                   type=\"password\"\r\n                                   inputRef={e => this.loginPass = e}\r\n                                   fullWidth\r\n\r\n                                />\r\n                                <Button  margin=\"dense\"\r\n                                        size=\"small\"\r\n                                         fullWidth\r\n                                       onClick={()=>{\r\n                                           this.setState({show:false});\r\n                                           Cart.instance.showDialogSubject.next({name: \"ForgotPassDialog\", show:true});\r\n                                       }}\r\n                                         color=\"primary\"\r\n                                         style={{justifyContent:\"flex-end\"}}\r\n                                >Forgot Password <ArrowForwardIosIcon/></Button>\r\n                            </DialogContent>\r\n                            :\r\n                            <DialogContent>\r\n                                <TextField\r\n                                    style={{marginTop:0, marginBottom:0}}\r\n                                    autoFocus\r\n                                    size=\"small\"\r\n                                    margin=\"dense\"\r\n                                    label=\"Email Address\"\r\n                                    type=\"email\"\r\n                                    fullWidth\r\n                                    inputRef={e => this.registerEmail = e}\r\n                                />\r\n                                <TextField\r\n                                    style={{marginTop:0, marginBottom:0}}\r\n                                    margin=\"dense\"\r\n                                    size=\"small\"\r\n                                    id=\"email2\"\r\n                                    label=\"Email Address Confirm\"\r\n                                    type=\"email\"\r\n                                    fullWidth\r\n                                    inputRef={e => this.registerEmail2 = e}\r\n                                />\r\n                                <TextField\r\n                                    style={{marginTop:0, marginBottom:0}}\r\n                                    margin=\"dense\"\r\n                                    size=\"small\"\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    fullWidth\r\n                                    inputRef={e => this.registerPass = e}\r\n                                />\r\n                                <TextField\r\n                                    style={{marginTop:0, marginBottom:0}}\r\n                                    margin=\"dense\"\r\n                                    size=\"small\"\r\n                                    id=\"pass2\"\r\n                                    label=\"Password Confirm\"\r\n                                    type=\"password\"\r\n                                    fullWidth\r\n                                    inputRef={e => this.registerPass2 = e}\r\n                                />\r\n                                <TextField\r\n                                    style={{marginTop:0, marginBottom:0}}\r\n                                    margin=\"dense\"\r\n                                    size=\"small\"\r\n                                    label=\"First Name\"\r\n                                    type=\"text\"\r\n                                    fullWidth\r\n                                    inputRef={e => this.registerFirstname = e}\r\n                                />\r\n                                <TextField\r\n                                    style={{marginTop:0, marginBottom:0}}\r\n                                    margin=\"dense\"\r\n                                    size=\"small\"\r\n                                    label=\"Last Name\"\r\n                                    type=\"text\"\r\n                                    fullWidth\r\n                                    inputRef={e => this.registerLastname = e}\r\n                                />\r\n                                <TextField size=\"small\" label=\"Phone\" type=\"phone\" fullWidth\r\n                                           inputRef={e => this.registerPhone = e}\r\n                                           style={{marginTop:0, marginBottom:0}}/>\r\n                                <TextField size=\"small\" label=\"Address\" type=\"text\" fullWidth\r\n                                           helperText=\"Address line\"\r\n                                           inputRef={e => this.registerStreet = e}\r\n                                           style={{marginTop:0, marginBottom:0}}/>\r\n                                <TextField size=\"small\" label=\"Town\" type=\"text\" fullWidth\r\n                                           inputRef={e => this.registerTown = e}\r\n                                           style={{marginTop:0, marginBottom:0}}/>\r\n                                <TextField size=\"small\" label=\"Postcode\" type=\"postcode\" fullWidth\r\n                                           inputRef={e => this.registerPostcode = e}\r\n                                           style={{marginTop:0, marginBottom:0}}/>\r\n                                <TextField size=\"small\" label=\"Address Notes\" type=\"text\" fullWidth\r\n                                           inputRef={e => this.registerAddressnotes = e}\r\n                                           style={{marginTop:0, marginBottom:0}}/>\r\n\r\n                            </DialogContent>\r\n                        }\r\n                        <DialogActions>\r\n                            <Button color=\"secondary\" onClick={() => {\r\n                                this.setState({show:false})\r\n                            }}>Cancel</Button>\r\n                            <Button color=\"secondary\" onClick={() => {\r\n                                this.handleRegisterClick()\r\n                            }}>Register</Button>\r\n                            {!this.state.showForRegister ? <Button color=\"primary\" onClick={() => {\r\n                                this.checkAuth()\r\n                            }}>Login</Button> : \"\"}\r\n                        </DialogActions>\r\n\r\n\r\n                        {/*\r\n                <Dialog fullScreen open={true} onClose={()=>app.handleCloseLoginDialog(false)} >\r\n                <Grid spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n                style={{ minHeight: '100vh' , padding: 10, margin: 10}}\r\n                >\r\n                <Grid item xs={12}>\r\n                <Grid container spacing={8} alignItems=\"flex-end\">\r\n                <Grid item md={true} sm={true} xs={true}>\r\n                <TextField id=\"username\" label=\"Username\" type=\"email\" fullWidth autoFocus required />\r\n                </Grid>\r\n                </Grid>\r\n                <Grid container spacing={8} alignItems=\"flex-end\">\r\n                <Grid item md={true} sm={true} xs={true}>\r\n                <TextField id=\"username\" label=\"Password\" type=\"password\" fullWidth required />\r\n                </Grid>\r\n                </Grid>\r\n                <Grid container alignItems=\"center\" justify=\"space-between\">\r\n                <Grid item>\r\n                <FormControlLabel control={\r\n                <Checkbox\r\n                color=\"primary\"\r\n                />\r\n                } label=\"Remember me\" />\r\n                </Grid>\r\n                <Grid item>\r\n                <Button disableFocusRipple disableRipple style={{ textTransform: \"none\" }} variant=\"text\" color=\"primary\">Forgot password ?</Button>\r\n                </Grid>\r\n                </Grid>\r\n                <Grid container justify=\"center\" style={{ marginTop: '10px' }}>\r\n                <Button variant=\"outlined\" color=\"primary\" style={{ textTransform: \"none\" }}>Login</Button>\r\n                </Grid>\r\n                </Grid>\r\n                </Grid>\r\n                */}\r\n                    </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LoginDialog;","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Link,\r\n    DialogTitle, DialogContent, DialogContentText, TextField, DialogActions, Button, Dialog\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport AppContext from '../AppContext'\r\nimport Site from './service/Site'\r\nimport Cart from \"./service/Cart\";\r\nimport Util from \"./service/Util\";\r\n\r\n\r\nclass ProfileDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name && e.name===\"ProfileDialog\")\r\n                this.setState({show:e.show});\r\n        })\r\n    }\r\n\r\n    handleUpdateClick() {\r\n        if (this.registerPass.value!=='' && this.registerPass.value !== this.registerPass2.value) {\r\n            Site.instance.showToast(\"Confirm your password\", \"error\", \"bottom\");\r\n            return;\r\n        }\r\n        if (this.registerFirstname.value===\"\") {\r\n            this.registerFirstname.focus()\r\n            Site.instance.showToast(\"Enter your first name\", \"error\", \"bottom\");\r\n            return;\r\n        }\r\n        if (this.registerLastname.value===\"\") {\r\n            this.registerLastname.focus()\r\n            Site.instance.showToast(\"Enter your last name\", \"error\", \"bottom\");\r\n            return;\r\n        }\r\n        if (this.registerPhone.value===\"\") {\r\n            this.registerPhone.focus()\r\n            Site.instance.showToast(\"Enter your phone number\", \"error\", \"bottom\");\r\n            return;\r\n        }\r\n        if (this.registerStreet.value===\"\") {\r\n            this.registerStreet.focus()\r\n            Site.instance.showToast(\"Enter address line\", \"error\", \"bottom\");\r\n            return;\r\n        }\r\n        if (this.registerTown.value===\"\") {\r\n            this.registerTown.focus()\r\n            Site.instance.showToast(\"Enter town\", \"error\", \"bottom\");\r\n            return;\r\n        }\r\n        if (this.registerPostcode.value===\"\" || !Site.instance.checkPostCode(this.registerPostcode.value)) {\r\n            this.registerPostcode.focus()\r\n            Site.instance.showToast(\"Enter valid Postcode\", \"error\", \"bottom\");\r\n            return;\r\n        }\r\n\r\n        let data = {};\r\n        data.update=1;\r\n        data.email=Site.instance.auth._u.username;\r\n        data.password = this.registerPass.value===\"\"? Site.instance.auth._u.pass : this.registerPass.value;\r\n        data.phone = this.registerPhone.value;\r\n        data.firstname = this.registerFirstname.value;\r\n        data.lastname = this.registerLastname.value;\r\n        data.postcode =  this.registerPostcode.value;\r\n//            data.flatnumber = this.registerFlatnumber.value;\r\n//            data.housenumber = this.registerHousenumber.value;\r\n//            data.housename = this.registerHousename.value;\r\n        data.street = this.registerStreet.value;\r\n        data.town = this.registerTown.value;\r\n        data.addressnotes = this.registerAddressnotes.value;\r\n        Site.instance.updateUserProfile(data, (result, msg)=>{\r\n            if (result===1) {\r\n                this.setState({show: false})\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.state.show &&\r\n                    <Dialog open fullWidth onClose={() => this.setState({show:false})}>\r\n                        <DialogTitle>Profile</DialogTitle>\r\n                            <DialogContent>\r\n                                <TextField\r\n                                    size=\"small\"\r\n                                    margin=\"dense\"\r\n                                    label=\"First Name\"\r\n                                    type=\"text\"\r\n                                    fullWidth\r\n                                    inputRef={e => {this.registerFirstname = e; if (e && Site.instance.auth) e.value=Site.instance.auth.firstname}}\r\n                                />\r\n                                <TextField\r\n                                    size=\"small\"\r\n                                    margin=\"dense\"\r\n                                    label=\"Last Name\"\r\n                                    type=\"text\"\r\n                                    fullWidth\r\n                                    inputRef={e => {this.registerLastname = e; if (e && Site.instance.auth) e.value=Site.instance.auth.lastname}}\r\n                                />\r\n                                <TextField label=\"Phone\" type=\"phone\" fullWidth size=\"small\"\r\n                                           inputRef={e => {this.registerPhone = e; if (e && Site.instance.auth) e.value=Site.instance.auth.phone}}/>\r\n                                <TextField label=\"Address\" type=\"text\" fullWidth size=\"small\"\r\n                                           helperText=\"Address line\"\r\n                                           inputRef={e => {this.registerStreet = e; if (e && Site.instance.auth) e.value=Site.instance.auth.street}}/>\r\n                                <TextField label=\"Town\" type=\"text\" fullWidth size=\"small\"\r\n                                           inputRef={e => {this.registerTown = e; if (e && Site.instance.auth) e.value=Site.instance.auth.town}}/>\r\n                                <TextField label=\"Postcode\" type=\"postcode\" fullWidth size=\"small\"\r\n                                           inputRef={e => {this.registerPostcode = e; if (e && Site.instance.auth) e.value=Site.instance.auth.postcode}}/>\r\n                                <TextField label=\"Address Notes\" type=\"text\" fullWidth size=\"small\"\r\n                                           inputRef={e => {this.registerAddressnotes = e; if (e && Site.instance.auth) e.value=Site.instance.auth.addressnotes}}/>\r\n\r\n                                <TextField\r\n                                    size=\"small\"\r\n                                    margin=\"dense\"\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    fullWidth\r\n                                    inputRef={e => this.registerPass = e}\r\n                                    helperText=\"Enter new password or leave it blank to keep it unchanged\"\r\n                                />\r\n                                <TextField\r\n                                    size=\"small\"\r\n                                    margin=\"dense\"\r\n                                    id=\"pass2\"\r\n                                    label=\"Password Confirm\"\r\n                                    type=\"password\"\r\n                                    fullWidth\r\n                                    inputRef={e => this.registerPass2 = e}\r\n                                />\r\n\r\n                            </DialogContent>\r\n                        <DialogActions>\r\n                            <Button color=\"secondary\" onClick={() => {\r\n                                this.setState({show:false})\r\n                            }}>Cancel</Button>\r\n                            <Button color=\"secondary\" onClick={() => {\r\n                                this.handleUpdateClick()\r\n                            }}>Update</Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProfileDialog;","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Drawer,\r\n    Grid, Paper, Container\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport NewReleasesOutlinedIcon from '@material-ui/icons/NewReleasesOutlined';\r\n\r\nimport AppContext from '../AppContext'\r\nimport Util from './service/Util.js'\r\nimport Site from './service/Site.js'\r\nimport Cart from \"./service/Cart\";\r\nimport CheckOutlinedIcon from \"@material-ui/icons/CheckOutlined\";\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport RegisterCustomer from \"./RegisterCustomer\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    toolbar: {\r\n        flexGrow: 1,\r\n        color: 'white',\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n}));\r\n\r\nclass MyAppBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            slider:0,\r\n            noappbar: false,\r\n        }\r\n    }\r\n    imagesLoad=[];\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        return (\r\n    <React.Fragment>\r\n\r\n    <AppBar position=\"static\"  style={{backgroundColor: \"#00000052\"}}>\r\n                        <Toolbar style={{\r\n                            // backgroundImage: \"url(\" + images[this.state.slider] + \")\",\r\n                            // backgroundSize: \"cover\",\r\n                            alignItems: 'flex-start',\r\n                            WebkitTransition: \"background-image 0.9s ease-in-out\",\r\n                            transition: \"background-image 0.9s ease-in-out\",\r\n                        }}>\r\n                            <IconButton edge=\"start\" className={useStyles.menuButton} color=\"inherit\"\r\n                                        aria-label=\"menu\" onClick={()=>{\r\n                                            Cart.instance.showDialogSubject.next({name: \"LeftDrawer\", show:true})\r\n                            }}>\r\n                                <MenuIcon/>\r\n                            </IconButton>\r\n                            <Typography variant=\"h6\" style={{\r\n                                flexGrow: 1,\r\n                                alignSelf: 'flex-end',\r\n                            }}>\r\n                            </Typography>\r\n                        </Toolbar>\r\n\r\n                    </AppBar>\r\n    </React.Fragment>\r\n    );\r\n    }\r\n}\r\n\r\nexport default MyAppBar;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport {\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Grid,\r\n    DialogContentText,\r\n    AppBar, Toolbar, IconButton, Typography, Paper\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Cart from \"./service/Cart\";\r\nimport Site from \"./service/Site\";\r\nimport Util from \"./service/Util\";\r\n\r\n\r\nclass PaymentDialog extends React.Component {\r\n    orderid=0\r\n    inPlaceOrderProgress=false\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            show:false,\r\n            cartChanged:'',\r\n            alertOpen:false,\r\n            alertMessage:\"\",\r\n            ppready:\"\" //\"Please wait...\"\r\n        }\r\n    }\r\n    showPaypalButtons(){\r\n        if (!window.paypal) {\r\n            Site.instance.showToast(\"Paypal not ready. Contact restaurant.\");\r\n            return;\r\n        }\r\n        Site.instance.getOrderId({}, (res, err) => {\r\n            if (res > 0) {\r\n                this.orderid = res;\r\n                window.paypal.Buttons(\r\n                    {\r\n                        createOrder: (data, actions)=>\r\n                        {\r\n                            try {\r\n                                let amount = Site.instance.isTestOrder() ? 0.01 : Cart.instance.totalCartValue\r\n                                Cart.instance.saveToStorage()\r\n                                let createdOrder = actions.order.create({\r\n                                    purchase_units: [{\r\n                                        amount: {\r\n                                            currency_code: \"GBP\",\r\n                                            value: amount\r\n                                        },\r\n                                        invoice_id: 'Order #' + Site.instance.site.siteid + \"#\" + this.orderid,\r\n                                    }]\r\n                                });\r\n                                return createdOrder\r\n                            }\r\n                            catch (e) {\r\n                                let data = {\r\n                                    err: e.message,\r\n                                    stacktrace:Util.instance.getStackTrace()\r\n                                }\r\n                                Site.instance.sendEventLog({data: JSON.stringify(data), event: \"ppcreateordererr\"})\r\n                                return null\r\n                            }\r\n                        },\r\n                        onApprove: (details, actions) => {\r\n                            Site.instance.showWaiting(true, \"Please wait ...\");\r\n                            Site.instance.completeOrder(\r\n                                this.orderid, { paydetails: details}, (orderid, message) => {\r\n                                    Site.instance.showWaiting(false, \"\");\r\n                                    if (orderid === 0) {\r\n                                        Site.instance.sendEventLog({data: message, event: \"onapproveerror\"})\r\n                                        Site.instance.showToast(message, \"error\", \"bottom\");\r\n                                    } else {\r\n                                        Site.instance.sendEventLog({data: message, event: \"onapproveok\"})\r\n                                        this.setState({alertOpen: true, alertMessage: message, alertOrderNo: orderid})\r\n                                    }\r\n                                });\r\n                        },\r\n                        onError:(err)=>{\r\n                            let data = {\r\n                                err: err && err.message? err.message : err,\r\n                                stacktrace: Util.instance.getStackTrace()\r\n                            }\r\n                            Site.instance.sendEventLog({data: JSON.stringify(data), event: \"pperror\"})\r\n                            Site.instance.showToast(\"Payment error. Try another browser or payment method\", \"error\", \"bottom\")\r\n                        }\r\n                    }).render('#paypalid1');\r\n            } else {\r\n                this.orderid = 0;\r\n                Site.instance.showToast(\"Cannot place order \" + err, \"error\", \"bottom\")\r\n            }\r\n        })\r\n    }\r\n    componentDidMount() {\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name && (e.name===\"PaymentDialog\" || e.name===\"*\")) {\r\n                this.orderid=0;\r\n                this.setState({show: e.show, alertOpen: false, alertMessage: \"\"},()=>{\r\n                    if (Cart.instance.paymentMethod === \"Online\" && Cart.instance.totalCartValue>0){\r\n                        setTimeout(()=>{\r\n                            this.showPaypalButtons()\r\n                        }, 1000);\r\n                    }\r\n                });\r\n            }\r\n        })\r\n        Cart.instance.cartSubject.subscribe(()=>{\r\n            this.setState({cartChanged:''})\r\n        })\r\n    }\r\n\r\n    render()\r\n        {\r\n            return (\r\n                this.state.show &&\r\n                        <React.Fragment>\r\n                        <Dialog  open={true} fullWidth={true} onClose={() => this.setState({show:false})}\r\n                                 style={{maxWidth: '960px', margin: '0 auto'}}\r\n                                 className=\"minWidth300\"\r\n                        >\r\n                            <AppBar style={{position:\"sticky\", top:0}}>\r\n                                <Toolbar>\r\n                                    <IconButton edge=\"start\" color=\"inherit\"\r\n                                                onClick={() => this.setState({show:false})}\r\n                                                aria-label=\"close\">\r\n                                        <CloseIcon/>\r\n                                    </IconButton>\r\n                                    <Typography variant=\"h6\" style={{flexGrow: 1}}>\r\n                                        Payment\r\n                                    </Typography>\r\n                                </Toolbar>\r\n                            </AppBar>\r\n                            <DialogContent>\r\n                                {Cart.instance.paymentMethod === \"Online\" && Cart.instance.totalCartValue>0?\r\n                                    <React.Fragment>\r\n                                        <Grid container justify = \"center\" >\r\n                                            <Typography variant=\"h6\" align=\"center\" style={{ padding:30}}>\r\n                                                {this.state.ppready}\r\n                                            </Typography>\r\n                                        </Grid>\r\n                                        <div id=\"paypalid1\"></div>\r\n\r\n                                        {/*<div style={{visibility: `${this.state.ppready===\"\"? \"visible\":\"hidden\"}`}}>\r\n                                    <PayPalButton\r\n                                        onError={(error) => {\r\n                                            Site.instance.sendEventLog({data: JSON.stringify(error), event: \"paypalerror\"})\r\n                                            Site.instance.showToast(\"Error in connecting to Paypal\", \"error\", \"bottom\")\r\n                                            this.setState({ppready:\"Error in connecting to Paypal\"})\r\n                                        }}\r\n\r\n                                        onButtonReady={() => {\r\n                                            let iframes = window.document.getElementsByTagName('iframe');\r\n                                            for(let i=0; i<iframes.length; i++)\r\n                                                iframes[i]['data-hj-allow-iframe']=1;\r\n                                            Site.instance.sendEventLog({data: \"\", event: \"paypalready\"})\r\n                                            Site.instance.getOrderId({}, (res, err) => {\r\n                                                if (res > 0) {\r\n                                                    this.orderid = res;\r\n                                                    this.setState({ppready:\"\"})\r\n                                                } else {\r\n                                                    this.orderid = 0;\r\n                                                    this.setState({ppready:\"Cannot place order \" + err})\r\n                                                    Site.instance.showToast(\"Cannot place order \" + err, \"error\", \"bottom\")\r\n                                                }\r\n                                            })\r\n                                        }}\r\n                                        shippingPreference=\"NO_SHIPPING\" // default is \"GET_FROM_FILE\"\r\n                                        currency={\"GBP\"}\r\n                                        createOrder={(data, actions) => {\r\n                                            Site.instance.sendEventLog({data: \"\" + this.orderid, event: \"createorder\"})\r\n                                            return actions.order.create({\r\n                                                purchase_units: [{\r\n                                                    amount: {\r\n                                                        currency_code: \"GBP\",\r\n                                                        value: Cart.instance.totalCartValue\r\n                                                    },\r\n                                                    invoice_id: 'Order #' + Site.instance.site.siteid + \"#\" + this.orderid,\r\n                                                    custom_id: Site.instance.site.siteid\r\n                                                }],\r\n                                                application_context: {\r\n                                                    shipping_preference: \"NO_SHIPPING\" // default is \"GET_FROM_FILE\"\r\n                                                }\r\n                                            });\r\n                                        }}\r\n                                        onApprove={(details, actions) => {\r\n                                            Site.instance.sendEventLog({data: JSON.stringify(details), event: \"onapprove\"})\r\n                                            Site.instance.completeOrder(\r\n                                                this.orderid, { paydetails: details}, (orderid, message) => {\r\n                                                if (orderid === 0) {\r\n                                                    Site.instance.sendEventLog({data: message, event: \"onapproveerror\"})\r\n                                                    Site.instance.showToast(message, \"error\", \"bottom\");\r\n                                                } else {\r\n                                                    Site.instance.sendEventLog({data: message, event: \"onapproveok\"})\r\n                                                    this.setState({alertOpen: true, alertMessage: message, alertOrderNo: orderid})\r\n                                                }\r\n                                            });\r\n                                        }}\r\n                                        options={{\r\n                                            clientId: Site.instance.site.ppclientid,\r\n                                            currency: \"GBP\"\r\n                                        }}\r\n\r\n                                    /></div>*/}\r\n                                    </React.Fragment>\r\n                                    :\r\n                                    <Grid container justify = \"center\">\r\n                                        <Typography variant=\"h6\" align=\"center\" style={{ padding:30, margin:\"20px 0\"}}>\r\n                                        You have chosen to pay with cash. You can place your order now.\r\n                                        </Typography>\r\n                                    </Grid>\r\n\r\n                                }\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button color=\"secondary\" onClick={() => {\r\n                                    this.setState({show:false})\r\n                                }}>Cancel</Button>\r\n                                {Cart.instance.paymentMethod === \"Cash\" ? <Button color=\"secondary\" onClick={() => {\r\n\r\n                                    if (Cart.instance.totalCartValue<=0) return;\r\n                                        Site.instance.showWaiting(true, \"Please wait ...\");\r\n                                        Site.instance.getOrderId({}, (res, err) => {\r\n                                            Site.instance.showWaiting(false, \"\");\r\n                                            this.orderid = res;\r\n                                            if (res > 0) {\r\n                                                Site.instance.completeOrder( this.orderid, {}, (orderid, message) => {\r\n                                                    if (orderid === 0) {\r\n                                                        Site.instance.showToast(message, \"error\", \"bottom\");\r\n                                                    } else {\r\n                                                        this.setState({alertOpen: true, alertMessage: message, alertOrderNo: orderid})\r\n                                                    }\r\n                                                });\r\n                                            } else {\r\n                                                Site.instance.showToast(\"Cannot place order \" + err, \"error\", \"bottom\")\r\n                                            }\r\n                                        })\r\n                                    }}>Place Order</Button>\r\n                                    : \"\"\r\n                                }\r\n                            </DialogActions>\r\n                        </Dialog>\r\n                            <Dialog\r\n                                open={this.state.alertOpen}\r\n                                    onClose={()=>{\r\n                                    this.setState({alertOpen:false, show:false})\r\n                                }}\r\n                                aria-labelledby=\"alert-dialog-title\"\r\n                                aria-describedby=\"alert-dialog-description\"\r\n                            >\r\n                                <DialogTitle>Order No: {this.state.alertOrderNo}</DialogTitle>\r\n                                <DialogContent>\r\n                                    <DialogContentText >\r\n                                        {this.state.alertMessage}\r\n                                    </DialogContentText>\r\n                                </DialogContent>\r\n                                <DialogActions>\r\n                                    <Button onClick={()=>{\r\n                                        this.setState({alertOpen:false, show:false})\r\n                                    }} color=\"primary\" autoFocus>\r\n                                        OK\r\n                                    </Button>\r\n                                </DialogActions>\r\n                            </Dialog>\r\n                        </React.Fragment>\r\n            );\r\n        }\r\n}\r\nexport default PaymentDialog;\r\n","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    TextField,\r\n    Dialog,\r\n    BottomNavigation,\r\n    Grid,\r\n    Box,\r\n    Button,\r\n    FormControl,\r\n    FormLabel,\r\n    RadioGroup,\r\n    FormControlLabel,\r\n    Radio,\r\n    Chip,\r\n    DialogActions\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport Util from './service/Util';\r\nimport Cart from './service/Cart';\r\nimport Site from './service/Site';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\n\r\n\r\nclass FoodOptionsDialog extends React.Component {\r\n    modelabrs=[];\r\n    sizeabrs=[];\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            show: false,\r\n            totalWithOptionPrice: undefined,\r\n            optionSize: undefined,\r\n            optionModel: undefined,\r\n            food:{},\r\n            offerDetail:undefined,\r\n            extraOfferPrice:0,\r\n            count:1,\r\n        }\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name===\"FoodOptionsDialog\"){\r\n                let food = null;\r\n                let offerDetail=e.extra && e.extra.offerDetail? e.extra.offerDetail : undefined;\r\n                if (offerDetail)\r\n                    food = JSON.parse(JSON.stringify(offerDetail.selectedFood));\r\n                else\r\n                    food = JSON.parse(JSON.stringify(e.extra.food));\r\n                let sizeabrs1 = [...new Set(food.prices.map(item => ({abr: item.sizeabr, id: item.sizeid})))];\r\n                if (offerDetail && offerDetail.sizeid && offerDetail.sizeid>0)\r\n                    sizeabrs1 = [...new Set(food.prices.filter(s=>s.sizeid*1===offerDetail.sizeid*1).map(item => ({abr: item.sizeabr, id: item.sizeid})))];\r\n                this.sizeabrs = [...new Set(sizeabrs1.map(o => JSON.stringify(o)))].map(s => JSON.parse(s)).filter(a=>a.id*1>0);\r\n                let modelabrs1 = [...new Set(food.prices.map(item => ({abr: item.modelabr, id: item.modelid})))];\r\n                this.modelabrs = [...new Set(modelabrs1.map(o => JSON.stringify(o)))].map(s => JSON.parse(s)).filter(a=>a.id*1>0);\r\n\r\n//                console.log(this.modelabrs);\r\n  //              console.log(this.sizeabrs);\r\n                food.toppings && food.toppings.forEach(topping =>{\r\n                    if (!('count' in topping)) topping.count = topping.checked * 1;\r\n                });\r\n\r\n                food.selectedSize=this.sizeabrs.length>0? this.sizeabrs[0] : undefined;\r\n                food.selectedModel=this.modelabrs.length>0? this.modelabrs[0] : undefined;\r\n\r\n                this.setState({food: food, show:e.show, totalWithOptionPrice:undefined,\r\n                        optionSize : food.selectedSize,\r\n                        optionModel: food.selectedModel,\r\n                        count:1,\r\n                        offerDetail: offerDetail,\r\n                        extraOfferPrice:0},\r\n                    ()=>{\r\n                        this.findPriceByOptions()\r\n                    })\r\n                ;\r\n            }\r\n        })\r\n    }\r\n    optionSizeSelected(e, size) {\r\n        e.persist();\r\n        this.state.food.selectedSize=size;\r\n        this.setState({optionSize: size}, () => {\r\n            this.findPriceByOptions();\r\n        });\r\n    }\r\n\r\n    optionModelSelected(e, model) {\r\n        e.persist();\r\n        this.state.food.selectedModel=model;\r\n        this.setState({optionModel: model}, () => {\r\n            this.findPriceByOptions();\r\n        });\r\n\r\n    }\r\n\r\n    clickOnTopping(e, topping) {\r\n        e.persist();\r\n        topping.count += 1\r\n        this.setState({foodOptionDialogFood: this.state.foodOptionDialogFood}, () => {\r\n            this.findPriceByOptions();\r\n        });\r\n\r\n    }\r\n    deleteOnTopping(e, topping) {\r\n        e.persist();\r\n        if (topping.count > 0) topping.count = topping.count - 1\r\n        this.setState({foodOptionDialogFood: this.state.foodOptionDialogFood}, () => {\r\n            this.findPriceByOptions();\r\n        });\r\n    }\r\n\r\n    findPriceByOptions() {\r\n        if(this.state.food) {\r\n            let model = this.state.optionModel;\r\n            let size = this.state.optionSize;\r\n            let freeToppingCount = this.state.food.freetoppingcount *1 + (this.state.offerDetail ? this.state.offerDetail.freetoppingcount *1: 0);\r\n            let price = Cart.instance.findPriceByOptions(this.state.food, model, size, freeToppingCount);\r\n            if (price) {\r\n                let extra = 0;\r\n                if (this.state.offerDetail) {\r\n                    let origFood = Site.instance.foodinfo.foods.find(f => f.foodid === this.state.food.foodid);\r\n                    let basePrice = Cart.instance.findPriceByOptions(origFood, {id: this.state.offerDetail.modelid*1===0? model.id:this.state.offerDetail.modelid}, {id: this.state.offerDetail.sizeid*1===0? size.id : this.state.offerDetail.sizeid}, freeToppingCount);\r\n                    if (price > basePrice) {\r\n                        extra = (price - basePrice);\r\n                    }\r\n//            console.log(\"Price:\" + price + \"/ base:\" + basePrice + \"////\" + extra + \"/model:\" + model.id + \" /size:\" + size.id + \"/offer model:\" + this.state.forofferdetail.modelid + \"/ offer size:\" + this.state.forofferdetail.sizeid);\r\n                    console.log(\"Extra: \" + extra);\r\n                }\r\n                this.state.food.totalWithOptionPrice = Math.round(price*100)/100;\r\n                this.state.food.extraOfferPrice = Math.round(extra*100)/100;\r\n                this.setState({totalWithOptionPrice: price, extraOfferPrice: extra, food: this.state.food});\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.state.show &&\r\n                    <Dialog fullWidth open={true} onClose={()=>{this.setState({show:false})}}\r\n                            className=\"dlg1 minWidth300\"\r\n                            style={{maxWidth: '960px', margin: '0 auto', position:\"fixed\"}}\r\n                    >\r\n                        <AppBar position=\"sticky\" styl={{ display: \"block\"}}>\r\n                            <Toolbar>\r\n                                <IconButton edge=\"start\" color=\"inherit\"\r\n                                            onClick={()=>{this.setState({show:false})}}\r\n                                            aria-label=\"close\">\r\n                                    <CloseIcon/>\r\n                                    </IconButton>\r\n                                <Typography variant=\"h6\" style={{flexGrow: 1}}> Food Options\r\n                                </Typography>\r\n                            </Toolbar>\r\n                        </AppBar>\r\n\r\n\r\n\r\n                        <Box style={{marginBottom: 10, padding: 15}} textAlign={\"left\"}>\r\n                            <Typography variant=\"h6\" align={\"center\"} width={1}>\r\n                                {this.state.food.title}\r\n                            </Typography>\r\n                            {\r\n                                this.state.food.toppings && this.state.food.toppings.filter(t=>t.checked*1>0).length>0 &&\r\n                                <Typography variant=\"h6\"  style={{fontSize: \"small\"}} align={\"center\"} width={1}>\r\n                                    { this.state.food.toppings.filter(t=>t.checked*1>0).map(t=>t.title).join(', ')}\r\n                                </Typography>\r\n                            }\r\n                                {this.modelabrs.length > 0 && <React.Fragment>\r\n                                    <FormLabel component=\"legend\">Model</FormLabel>\r\n                                    <RadioGroup row defaultValue=\"top\">\r\n                                        {\r\n                                            this.modelabrs.map((model,index) => (\r\n                                                <FormControlLabel\r\n                                                    value={model.abr}\r\n                                                    control={<Radio color=\"primary\"/>}\r\n                                                    label={model.abr}\r\n                                                    labelPlacement=\"end\"\r\n                                                    key={model.id}\r\n                                                    checked={this.state.optionModel===model}\r\n                                                    onChange={(e) => this.optionModelSelected(e, model)}\r\n                                                />\r\n                                            ))\r\n                                        }\r\n                                    </RadioGroup>\r\n                                </React.Fragment>\r\n                                }\r\n                                {this.sizeabrs.length > 0 && <React.Fragment>\r\n                                    <FormLabel component=\"legend\">Size</FormLabel>\r\n                                    <RadioGroup row  defaultValue=\"top\">\r\n                                        {\r\n                                            this.sizeabrs.map((size,index) => (\r\n                                                <FormControlLabel\r\n                                                    value={size.abr}\r\n                                                    control={<Radio color=\"primary\"/>}\r\n                                                    label={size.abr}\r\n                                                    labelPlacement=\"end\"\r\n                                                    key={size.id}\r\n                                                    checked={this.state.optionSize===size}\r\n                                                    onChange={(e) => this.optionSizeSelected(e, size)}\r\n                                                />\r\n                                            ))\r\n                                        }\r\n                                    </RadioGroup>\r\n                                </React.Fragment>\r\n                                }\r\n                                {\r\n                                    this.state.food.toppings && this.state.food.toppings.length > 1 &&\r\n                                        <Box style={{marginTop: 20, marginBottom:10}} width={1}>\r\n                                    <FormLabel component=\"legend\">Toppings</FormLabel>\r\n                                    <Box align={\"center\"} className={\"topping-chips\"}>\r\n                                        {\r\n                                            this.state.food.toppings.map((topping) => (\r\n                                                <Badge key={topping.toppingid} badgeContent={topping.count}\r\n                                                       component={\"div\"}\r\n                                                       color=\"secondary\" invisible={topping.count < 2}\r\n                                                       style={{margin: 5, width:'95%'}}>\r\n                                                    <Chip\r\n                                                        variant={ topping.count>0? undefined : \"outlined\"}\r\n                                                        component={\"div\"}\r\n                                                        style={{width:\"100%\"}}\r\n                                                        label={topping.title}\r\n                                                        color={topping.count > 0 ? \"primary\" : undefined}\r\n                                                        onClick={(e) => {\r\n                                                            this.clickOnTopping(e, topping)\r\n                                                        }}\r\n                                                        onDelete={topping.count > 0 ? (e) => {\r\n                                                            this.deleteOnTopping(e, topping)\r\n                                                        } : undefined}\r\n                                                    />\r\n                                                </Badge>\r\n                                            ))\r\n                                        }\r\n                                    </Box>\r\n                                        </Box>\r\n                                }\r\n                                <TextField\r\n                                    label=\"Note\"\r\n                                    variant=\"outlined\"\r\n                                    size=\"small\"\r\n\r\n                                    onInput = {(e) =>{\r\n                                        e.target.value = e.target.value.slice(0,99)\r\n                                    }}\r\n                                    inputRef={e => this.note = e}\r\n                                    style={{marginLeft:20, marginRight:20, minWidth: \"90%\"}}\r\n\r\n                                />\r\n                                {!this.state.offerDetail && <TextField\r\n                                    label=\"Quantity\"\r\n                                    type=\"number\"\r\n                                    placeholder=\"Quantity\"\r\n                                    margin=\"normal\"\r\n                                    defaultValue=\"1\"\r\n                                    onChange={(e)=>{\r\n                                        e.preventDefault();\r\n                                        let cnt = Math.max(1, e.target.value);\r\n                                        this.state.food.count=cnt;\r\n                                        this.setState({count: cnt})\r\n                                    }\r\n                                    }\r\n                                    style={{marginLeft:20, marginRight:20, maxWidth:100}}\r\n\r\n                                />\r\n                                }\r\n                        </Box>\r\n                        <DialogActions style={{ position:\"sticky\", bottom:0,zIndex: 200,\r\n                            marginTop: 0,\r\n                            borderTop: \"1px dotted red\",\r\n                            textAlign:\"center\",\r\n                            backgroundColor:\"white\",\r\n                            height:40}}>\r\n{/*\r\n                        <BottomNavigation\r\n                            style={{\r\n                                width: '100%',\r\n                                position: 'sticky',\r\n                                bottom: 0,\r\n                                zIndex: 200,\r\n                                marginTop: 0,\r\n                                borderTop: \"1px dotted red\",\r\n                                textAlign:\"center\",\r\n                                height:40\r\n                            }}>\r\n*/}\r\n                                <Box component=\"span\" m={1} style={{margin: \"0 auto\"}}>\r\n                                    {!this.state.offerDetail && this.state.totalWithOptionPrice>0 && Util.instance.formatPrice(this.state.totalWithOptionPrice*this.state.count) }\r\n                                    {this.state.offerDetail && this.state.extraOfferPrice>0 && (\"Extra \" + Util.instance.formatPrice(this.state.extraOfferPrice)) }\r\n                                </Box>\r\n                                <Button style={{position: \"absolute\", right: 0}} color={\"secondary\"}\r\n                                        disabled={this.state.totalWithOptionPrice===undefined}\r\n                                        onClick={() => {\r\n                                            if (this.state.offerDetail){\r\n                                                Cart.instance.showDialogSubject.next({\r\n                                                    name: \"OfferOptionsDialog\",\r\n                                                    show: true,\r\n                                                    extra:{offerFood:this.state.food}\r\n                                                })\r\n                                            }\r\n                                            else {\r\n                                                this.state.food.note=this.note.value;\r\n                                                Cart.instance.addToCartWithOptions(this.state.food);\r\n                                            }\r\n                                            this.setState({show: false})\r\n                                        }}>ADD\r\n                                    < ArrowForwardIosIcon/>\r\n                                </Button>\r\n\r\n                            {/*\r\n                        </BottomNavigation>\r\n*/}\r\n                        </DialogActions>\r\n                    </Dialog>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default FoodOptionsDialog;","import React from 'react';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Dialog,\r\n    BottomNavigation,\r\n    Grid,\r\n    Box,\r\n    Button,\r\n    ListItemSecondaryAction, Drawer, TextField, FormControl, DialogActions\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport AppContext from '../AppContext'\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Util from \"./service/Util\";\r\nimport CheckOutlinedIcon from \"@material-ui/icons/CheckOutlined\";\r\nimport Site from './service/Site';\r\nimport Cart from './service/Cart';\r\n\r\nclass OfferOptionsDialog extends React.Component {\r\n    static contextType= AppContext;\r\n    constructor(props) {\r\n        super(props);\r\n        AppContext.app = this;\r\n        this.state = {\r\n            show:false,\r\n            offer:{},\r\n            showDrawer: false,\r\n            chosen: {},\r\n            detail:{},\r\n            offerTotal:0,\r\n            count:1,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name===\"OfferOptionsDialog\" && e.show){\r\n                if (e.extra.offerFood){\r\n                    this.state.detail.selectedFood=e.extra.offerFood;\r\n                    this.state.detail.selectedFood.count=1;\r\n                    let extra = 0;\r\n                    this.state.offer.details.map((detail)=>{\r\n                        if (detail.selectedFood && detail.selectedFood.extraOfferPrice) {\r\n                            extra+=detail.selectedFood.extraOfferPrice;\r\n                        }\r\n                    })\r\n                    this.state.offer.total =this.state.offer.price *1 + extra;\r\n                    this.setState({detail:this.state.detail, offerTotal: this.state.offer.total, count:1});\r\n                }\r\n                else\r\n                    this.setState({offer : JSON.parse(JSON.stringify(e.extra.offer)), show:e.show, showDrawer:false, chosen:{}, offerTotal: e.extra.offer.price*1, count:1})\r\n            }\r\n        })\r\n    }\r\n    findOptions(detail){\r\n        if (!detail) return [];\r\n        let foods = [];\r\n        let foodinfo = Site.instance.foodinfo;\r\n        if (detail.typeid>0) {\r\n            let o = Util.instance.findByKeyValue(foodinfo.types, 'typeid',detail.typeid);\r\n            if (o && o.title){\r\n                foods=foodinfo.foods.filter((f)=>f.typeid===o.typeid);\r\n            }\r\n        }\r\n        if (detail.foodid>0) {\r\n            foods=foodinfo.foods.filter((f)=>f.foodid===detail.foodid);\r\n        }\r\n        return foods;\r\n    }\r\n    chooseFood(food){\r\n        this.setState({\r\n            showDrawer:false\r\n        })\r\n        this.state.detail.selectedFood=food;\r\n        if (food.prices && food.prices.length>1){\r\n            Cart.instance.showDialogSubject.next({\r\n                name: \"FoodOptionsDialog\",\r\n                show: true,\r\n                extra: {offerDetail:this.state.detail}\r\n            })\r\n        }\r\n    }\r\n    render() {\r\n        let offer=this.state.offer;\r\n        return (\r\n            this.state.show &&\r\n            <React.Fragment>\r\n                    <Dialog fullWidth open={true} onClose={() => this.setState({show:false})}\r\n                            style={{maxWidth: '960px', margin: '0 auto'}}\r\n                            className=\"dlg1 minWidth300\"\r\n                    >\r\n                        <AppBar position=\"sticky\">\r\n                            <Toolbar>\r\n                                <IconButton edge=\"start\" color=\"inherit\"\r\n                                            onClick={() => this.setState({show:false})}\r\n                                            aria-label=\"close\">\r\n                                    <CloseIcon/>\r\n                                </IconButton>\r\n                                <Typography variant=\"h6\" style={{flexGrow: 1}}>\r\n                                    {offer && offer.title}\r\n                                </Typography>\r\n                            </Toolbar>\r\n                        </AppBar>\r\n                        <List style={{marginBottom:10}}>\r\n                            {\r\n                                offer && offer.details.map((offerDetail) => (\r\n                                    <ListItem button selected\r\n                                    key={offerDetail.offerdetailid}\r\n                                              onClick={() => {this.setState({showDrawer: true, detail: offerDetail}); }}\r\n                                              style={{ marginBottom: 5, marginTop: 5}}>\r\n                                        <ListItemText\r\n                                            primary={offerDetail.title}\r\n                                        />\r\n                                        <ListItemSecondaryAction onClick={() => {this.setState({showDrawer: true, detail: offerDetail}); }}>\r\n                                            <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                <span>{offerDetail.selectedFood? offerDetail.selectedFood.title : \"Choose\"}</span>\r\n                                                <ArrowForwardIosIcon/>\r\n                                            </div>\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                ))\r\n                            }\r\n                        </List>\r\n                        <TextField\r\n                            label=\"Note\"\r\n                            variant=\"outlined\"\r\n                            inputRef={e => this.note = e}\r\n                            style={{marginLeft:20, marginRight:20}}\r\n                            size=\"small\"\r\n                        />\r\n                        <TextField\r\n\r\n                            label=\"Quantity\"\r\n                            type=\"number\"\r\n                            placeholder=\"Quantity\"\r\n                            margin=\"normal\"\r\n                            defaultValue=\"1\"\r\n                            onChange={(e)=>{\r\n                                e.preventDefault();\r\n                                let cnt = Math.max(1, e.target.value);\r\n                                this.state.offer.count=cnt;\r\n                                this.setState({count: cnt})\r\n                            }\r\n                            }\r\n                            inputRef={e => this.count = e}\r\n                            style={{marginLeft:20, marginRight:20, maxWidth:100}}\r\n                        />\r\n\r\n                        <DialogActions style={{ position:\"sticky\", bottom:0,zIndex: 200,\r\n                            marginTop: 0,\r\n                            borderTop: \"1px dotted red\",\r\n                            textAlign:\"center\",\r\n                            backgroundColor:\"white\",\r\n                            height:40}}>\r\n\r\n                                <Box component=\"span\" m={1} style={{ margin: \"0 auto\"}}>\r\n                                    {Util.instance.formatPrice(this.state.offerTotal*this.state.count)}\r\n                                </Box>\r\n                                <Button style={{position: \"absolute\", right: 0}} color={\"secondary\"}\r\n                                        onClick={() => {\r\n                                            let selectedCount=0;\r\n                                            this.state.offer.details.forEach((d)=>{\r\n                                                if (d.selectedFood) selectedCount++;\r\n                                            })\r\n                                            if (selectedCount<this.state.offer.details.length){\r\n                                                Site.instance.showToast(\"Choose all items\", \"error\", \"bottom\")\r\n                                            }else {\r\n                                                this.state.offer.note=this.note.value;\r\n                                                Cart.instance.addOfferToCart(this.state.offer);\r\n                                                this.setState({show: false})\r\n                                            }\r\n                                        }}>ADD <ArrowForwardIosIcon/></Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n        <Drawer anchor=\"bottom\"\r\n                open={this.state.showDrawer}\r\n                onClose={() => this.setState({showDrawer: false})}\r\n                PaperProps={{ style: { maxWidth: 500, margin: \"0 auto\"}}}\r\n        >\r\n            <List >\r\n                {\r\n                    this.state.detail && this.findOptions(this.state.detail).map((food) => (\r\n                        <ListItem button\r\n                                  key={food.foodid}\r\n                                  onClick={() => this.chooseFood(food)}>\r\n                            <ListItemText primary={\r\n                                <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                    <div style={{flexGrow: 1}}>{food.title}</div>\r\n                                    {this.state.detail.selectedFood && this.state.detail.selectedFfoodid === food.foodid &&\r\n                                    <CheckOutlinedIcon color=\"disabled\"/>\r\n                                    }\r\n                                </div>}/>\r\n                        </ListItem>\r\n                    ))\r\n                }\r\n            </List>\r\n        </Drawer>\r\n            </React.Fragment>\r\n\r\n    );\r\n    }\r\n}\r\n\r\nexport default OfferOptionsDialog;","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Drawer,\r\n    ListItemIcon, Divider, Container, BottomNavigation, Grid\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport AppContext from '../AppContext'\r\nimport Util from './service/Util.js'\r\nimport Site from './service/Site.js'\r\nimport Cart from \"./service/Cart\";\r\nimport InboxIcon from \"@material-ui/icons/Inbox\";\r\nimport MailIcon from \"@material-ui/icons/Mail\";\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    toolbar: {\r\n        flexGrow: 1,\r\n        color: 'white',\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n}));\r\n\r\nclass LeftDrawer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            show: false,\r\n            siteChange:'',\r\n            authChange:''\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        Site.instance.siteSubject.subscribe(()=>{\r\n            this.setState({siteChange: ''})\r\n        })\r\n        Site.instance.authSubject.subscribe(()=>{\r\n            this.setState({authChange: ''})\r\n        })\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name===\"LeftDrawer\") {\r\n                this.setState({show: !this.state.show});\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    render() {\r\n        let site = Site.instance.site;\r\n        let auth = Site.instance.auth;\r\n        return (\r\n            <Drawer anchor={\"left\"} open={this.state.show} onClose={()=>{\r\n                this.setState({show:false})\r\n            }}\r\n                    PaperProps={{\r\n                        style: {minWidth:300, minHeight:'100vh'}\r\n                    }}\r\n            >\r\n                {Site.instance.isLogin() &&\r\n                    <List style={{width: 'auto', height:'100%'}} >\r\n                        <ListItem button key=\"logo\" onClick={() => {\r\n                            Cart.instance.showDialogSubject.next({\r\n                                name: \"ProfileDialog\",\r\n                                show: true\r\n                            })\r\n                        }}>\r\n                            <ListItemText primary={\r\n                            <React.Fragment>\r\n                                <AccountCircleOutlinedIcon style={{fontSize:100, color:'#555555'}}/>\r\n                                <Typography>{Site.instance.auth.firstname} {Site.instance.auth.lastname}</Typography>\r\n                                <Typography>{Site.instance.auth.email}</Typography>\r\n                            </React.Fragment>\r\n                            } style={{alignContent:\"center\", textAlign:\"center\"}}/>\r\n                        </ListItem>\r\n                        <ListItem button key=\"profile\" onClick={() => {\r\n                            this.setState({show:false})\r\n                            Cart.instance.showDialogSubject.next({\r\n                                name: \"ProfileDialog\",\r\n                                show: true\r\n                            })\r\n                        }}>\r\n                            <ListItemIcon><AccountCircleIcon/></ListItemIcon>\r\n                            <ListItemText primary={\"Profile\"}/>\r\n                        </ListItem>\r\n                        <ListItem button key=\"history\" onClick={() => {\r\n                            this.setState({show:false})\r\n                            Cart.instance.showDialogSubject.next({\r\n                                name: \"OrderHistoryDialog\",\r\n                                show: true\r\n                            })\r\n                        }}>\r\n                            <ListItemIcon><HistoryIcon/></ListItemIcon>\r\n                            <ListItemText primary={\"Order History\"}/>\r\n                        </ListItem>\r\n                        <ListItem button key=\"logout\" onClick={() => {\r\n                            this.setState({show:false});\r\n                            Site.instance.logout();\r\n                        }}>\r\n                            <ListItemIcon><ExitToAppIcon/></ListItemIcon>\r\n                            <ListItemText primary={\"Logout\"}/>\r\n                        </ListItem>\r\n                    </List>\r\n                }\r\n                {!Site.instance.isLogin() &&\r\n\r\n                    <List style={{width: 'auto', height:'100%'}}>\r\n                        <ListItem button key=\"logo\" onClick={() => {\r\n                            this.setState({show:false})\r\n                            Cart.instance.showDialogSubject.next({\r\n                                name: \"LoginDialog\",\r\n                                show: true\r\n                            })\r\n                        }}>\r\n                            <ListItemText primary={\r\n                                <React.Fragment>\r\n                                    <AccountCircleOutlinedIcon style={{fontSize:100, color:'#555555'}}/>\r\n                                    <Typography>Not logged in</Typography>\r\n                                </React.Fragment>\r\n                            } style={{alignContent:\"center\", textAlign:\"center\"}}/>\r\n                        </ListItem>\r\n                        <ListItem button key=\"login\" onClick={() => {\r\n                            this.setState({show:false})\r\n                            Cart.instance.showDialogSubject.next({\r\n                                name: \"LoginDialog\",\r\n                                show: true\r\n                            })\r\n                        }}>\r\n                            <ListItemIcon><AccountCircleIcon/></ListItemIcon>\r\n                            <ListItemText primary={\"Login/Register\"}/>\r\n                        </ListItem>\r\n                    </List>\r\n                }\r\n                <BottomNavigation\r\n                    style={{\r\n                        width: '100%',\r\n                        position: 'sticky',\r\n                        bottom: 0,\r\n                        marginTop: 5,\r\n                    }}>\r\n                    <Grid justify=\"center\" container\r\n                          spacing={0}\r\n                          direction=\"row\"\r\n                          alignItems=\"center\"\r\n                    >\r\n                        <Typography component={\"h5\"} style={{fontSize: \"smaller\", color: '#999999'}}>RAMTD App Version: 1.0</Typography>\r\n                    </Grid>\r\n                </BottomNavigation>\r\n            </Drawer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LeftDrawer;","import React from 'react';\r\nimport {createMuiTheme, makeStyles, MuiThemeProvider} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Grid,\r\n    Button, BottomNavigation, Snackbar, Container, Dialog, DialogTitle, DialogContent, DialogActions\r\n} from \"@material-ui/core\";\r\nimport {Alert} from \"@material-ui/lab\";\r\nimport Site from \"./service/Site\";\r\n\r\n\r\n\r\nclass MessageBox extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            show:false,\r\n            message: \"\",\r\n            title:\"\"\r\n        }\r\n        Site.instance.messageBoxSubject.subscribe((msg)=>{\r\n            if (msg.msg){\r\n                    this.setState({\r\n                        show: true,\r\n                        message: msg.msg,\r\n                        title: msg.title,\r\n                    });\r\n                }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n                this.state.show &&\r\n\r\n                <Dialog open={true}>\r\n                    <DialogTitle>\r\n                        {this.state.title}\r\n                    </DialogTitle>\r\n                    <DialogContent style={{ minWidth: 250, minHeight: 150}}>\r\n                        <Typography component={\"body2\"}>\r\n                            <div dangerouslySetInnerHTML={{__html: this.state.message}}/>\r\n                        </Typography>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button color=\"primary\" onClick={()=>{\r\n                            this.setState({show: false})\r\n                        }} >OK</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n    );\r\n    }\r\n}\r\n\r\nexport default MessageBox;","import React from 'react';\r\nimport {makeStyles, MuiThemeProvider} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    DialogContent,\r\n    Container, BottomNavigation, Grid, Box, Button, Dialog, Card, CardContent, ListItemSecondaryAction, DialogActions\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport AppContext from '../AppContext'\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\r\nimport Util from './service/Util.js'\r\nimport Cart from './service/Cart.js'\r\nimport Site from './service/Site'\r\n\r\nclass OrderHistoryDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state= {\r\n            show: false,\r\n            orders: [],\r\n            error:''\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name && e.name===\"OrderHistoryDialog\") {\r\n                Site.instance.fetchOrderHistory((result, data)=>{\r\n                    if (result===1){\r\n                        let offerdetails = [];\r\n                        Site.instance.foodinfo.offers.map(offer=>{\r\n                            offerdetails = offerdetails.concat(offer.details);\r\n                        })\r\n                        data.map((order)=>{\r\n                            order.details.map(line=>{\r\n                                if (line.foodid_1*1>0){\r\n                                    let food = Site.instance.foodinfo.foods.find(f=>f.foodid*1===line.foodid_1*1);\r\n                                    line.foodtitle=food?food.title:\"\";\r\n                                }\r\n                                if (line.offerdetailid*1>0){\r\n                                    let offerdetail = offerdetails.find(f=>f.offerdetailid*1===line.offerdetailid*1);\r\n                                    let offerid = offerdetail? offerdetail.offerid*1 : 0;\r\n                                    if (offerid>0){\r\n                                        let offer = Site.instance.foodinfo.offers.find(f=>f.offerid*1===offerid);\r\n                                        line.offertitle=offer?offer.title:\"\";\r\n                                    }\r\n                                }\r\n                            })\r\n                        })\r\n                        this.setState({show: e.show, orders: data, error:''});\r\n                    }else{\r\n                        this.setState({orders: [], error:\"Error in displaying previous orders\"});\r\n                    }\r\n\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.state.show &&\r\n                    <Dialog fullWidth={false}\r\n                            open={true} onClose={() => this.setState({show:false})}\r\n                    style={{minWidth: 300}}\r\n                    >\r\n\r\n                        <AppBar position={\"static\"}>\r\n                            <Toolbar>\r\n                                <IconButton edge=\"start\" color=\"inherit\"\r\n                                            onClick={() => this.setState({show:false})}\r\n                                            aria-label=\"close\">\r\n                                    <CloseIcon/>\r\n                                </IconButton>\r\n                                <Typography variant=\"h6\" style={{flexGrow: 1}}>\r\n                                    Order History\r\n                                </Typography>\r\n                            </Toolbar>\r\n                        </AppBar>\r\n                        <DialogContent style={{marginTop:10, padding:0}}>\r\n                            {this.state.orders.length===0 &&\r\n                            <Typography variant=\"h6\" style={{margin: \"40px auto\", textAlign:\"center\", width:250}}>\r\n                                No Order History\r\n                            </Typography>\r\n                            }\r\n                        {this.state.orders.map((order) => (\r\n                            <Card key={order.orderid} style={{margin: 10}}>\r\n                                <CardContent>\r\n                                    <Typography variant=\"h7\" component=\"h5\" style={{textAlign:\"center\"}}>\r\n                                        Order# {order.orderid}   ○ {order.ordertime}\r\n                                    </Typography>\r\n                                    <List dense style={{padding:0}}>\r\n                                    {order.details.map((line) => (\r\n                                        <ListItem key={line.orderdetailid}>\r\n                                            <ListItemText primary={\r\n                                                <span style={{fontSize: \"0.8rem\"}}>{line.quantity*1}x{line.foodid_1*1>0 && line.foodtitle} {line.offerdetailid*1>0 && line.offertitle}</span>\r\n                                            }\r\n                                            />\r\n                                            <ListItemSecondaryAction>\r\n                                                <span style={{fontSize: \"0.8rem\"}}>{Util.instance.formatPrice(line.unitprice)}</span>\r\n                                            </ListItemSecondaryAction>\r\n                                        </ListItem>\r\n                                        ))}\r\n                                    </List>\r\n                                    <List  dense style={{padding:0}}>\r\n                                            <ListItem key=\"sub\" >\r\n                                                <ListItemText/>\r\n                                                <ListItemSecondaryAction>\r\n                                                    <span style={{fontSize: \"0.8rem\"}}>Subtotal: {Util.instance.formatPrice(order.totalvalue)}</span>\r\n                                                </ListItemSecondaryAction>\r\n                                            </ListItem>\r\n                                        <ListItem key=\"deliveryCharge\">\r\n                                            <ListItemText/>\r\n                                            <ListItemSecondaryAction>\r\n                                                <span style={{fontSize: \"0.8rem\"}}>DeliveryCharge: {Util.instance.formatPrice(order.deliverycharge)}</span>\r\n                                            </ListItemSecondaryAction>\r\n                                        </ListItem>\r\n                                        <ListItem key=\"discount\">\r\n                                            <ListItemText/>\r\n                                            <ListItemSecondaryAction>\r\n                                                <span style={{fontSize: \"0.8rem\"}}>Discount: {Util.instance.formatPrice(order.voucher)}</span>\r\n                                            </ListItemSecondaryAction>\r\n                                        </ListItem>\r\n                                        <ListItem key=\"total\" >\r\n                                            <ListItemText/>\r\n                                            <ListItemSecondaryAction>\r\n                                                <span style={{fontWeight:\"bold\",fontSize: \"0.8rem\"}}>Total: {Util.instance.formatPrice(order.amountdue)}</span>\r\n                                            </ListItemSecondaryAction>\r\n                                        </ListItem>\r\n                                        <ListItem key=\"notes\" >\r\n                                            <ListItemText primary={\r\n                                                <Typography variant=\"body2\" style={{fontSize: \"0.8rem\"}}>\r\n                                                {order.paystatus*1===1 && \"Paid \"}\r\n                                            {order.paystatus*1===2 && \"\"}\r\n                                            {order.paymenttypeid*1===31 && \"Online \"}\r\n                                            {order.paymenttypeid*1===30 && \"Cash \"}\r\n                                            {order.ordertype*1===1 && \"Collection \"}\r\n                                            {order.ordertype*1===2 && \"Delivery \"}\r\n                                                <br />\r\n                                            {Site.instance.getCustomerAddress()}\r\n                                                </Typography>}\r\n                                            />\r\n                                        </ListItem>\r\n                                    </List>\r\n                                </CardContent>\r\n                            </Card>\r\n                        ))}\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button color=\"secondary\" onClick={() => {\r\n                                this.setState({show:false})\r\n                            }}>Cancel</Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default OrderHistoryDialog;","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    AppBar,\r\n    Badge,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Link,\r\n    DialogTitle, DialogContent, DialogContentText, TextField, DialogActions, Button, Dialog\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport {ShoppingBasketOutlined, Person, PersonOutline, MotorcycleOutlined} from '@material-ui/icons';\r\nimport AppContext from '../AppContext'\r\nimport Site from './service/Site'\r\nimport Util from \"./service/Util\"\r\nimport Cart from \"./service/Cart\"\r\n\r\n\r\nclass ForgotPassDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        Cart.instance.showDialogSubject.subscribe((e)=>{\r\n            if (e.name && e.name===\"ForgotPassDialog\")\r\n                this.setState({show:e.show, mode: ''});\r\n        })\r\n    }\r\n\r\n    sendRecoveryCode(){\r\n        let email = this.emailField.value;\r\n        if (email===\"\" || !Util.instance.validateEmail(email)){\r\n            Site.instance.showToast(\"Please enter valid email address\", \"error\", \"bottom\")\r\n        }else {\r\n            Site.instance.sendPassRecoveryCode({email: email}, (result, msg) => {\r\n                if (result === 1) {\r\n                    this.setState({mode: 'codesent'})\r\n                }\r\n            });\r\n        }\r\n    }\r\n    resetPassword(){\r\n        let email = this.emailField.value;\r\n        let code = this.codeField.value;\r\n        let password = this.password.value;\r\n        let password2 = this.password.value;\r\n\r\n        if (email===\"\" || !Util.instance.validateEmail(email)){\r\n            Site.instance.showToast(\"Please enter valid email address\", \"error\", \"bottom\")\r\n        }else if (password===\"\" || password!==password2) {\r\n            Site.instance.showToast(\"Please enter password and type it again to confirm\", \"error\", \"bottom\")\r\n        }else if (code===\"\") {\r\n            Site.instance.showToast(\"Please enter the recovery code sent to your email address\", \"error\", \"bottom\")\r\n        }else {\r\n            Site.instance.changePassword({email: email, code: code, password: password}, (result, msg) => {\r\n                if (result === 1) {\r\n                    this.setState({mode: '', show:false})\r\n                }\r\n            });\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            this.state.show &&\r\n                    <Dialog open fullWidth onClose={() => this.setState({show:false})}>\r\n                        <DialogTitle>Password Recovery</DialogTitle>\r\n                        <DialogContent>\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                id=\"email\"\r\n                                label=\"Email Address\"\r\n                                type=\"email\"\r\n                                fullWidth\r\n                                inputRef={e => this.emailField = e}\r\n                                disabled={this.state.mode==='codesent'}\r\n                            />\r\n                            {this.state.mode === 'codesent' &&\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                label=\"Recovery Code\"\r\n                                type=\"number\"\r\n                                fullWidth\r\n                                inputRef={e => this.codeField = e}\r\n                            />\r\n                            }\r\n                            {this.state.mode === 'codesent' &&\r\n                            <TextField\r\n                                margin=\"dense\"\r\n                                label=\"New Password\"\r\n                                type=\"password\"\r\n                                fullWidth\r\n                                inputRef={e => this.password = e}\r\n                            />\r\n                            }\r\n                            {this.state.mode === 'codesent' &&\r\n                                <TextField\r\n                                margin=\"dense\"\r\n                                label=\"New Password again\"\r\n                                type=\"password\"\r\n                                fullWidth\r\n                                inputRef={e => this.password2 = e}\r\n                                />\r\n                            }\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button color=\"secondary\" onClick={() => {\r\n                                this.setState({show:false})\r\n                            }}>Cancel</Button>\r\n                            {this.state.mode === '' && <Button color=\"primary\" onClick={() => {\r\n                                this.sendRecoveryCode()\r\n                            }}>Send Recovery Code</Button>\r\n                            }\r\n                            {this.state.mode === 'codesent' &&\r\n                            <Button color=\"primary\" onClick={() => {\r\n                                this.resetPassword()\r\n                            }}>Update Password</Button>\r\n                            }\r\n                        </DialogActions>\r\n                    </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ForgotPassDialog;","import React from 'react';\r\nimport {\r\n    Backdrop, CircularProgress\r\n} from \"@material-ui/core\";\r\nimport Site from \"./service/Site\";\r\n\r\n\r\nclass WaitingProgress extends React.Component {\r\n    timer;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            show:false,\r\n            message: \"\",\r\n        }\r\n        Site.instance.waitingSubject.subscribe((data)=>{\r\n            this.setState({\r\n                show: data.show,\r\n                message: data.msg?? \"\"\r\n            });\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n                this.state.show &&\r\n                <Backdrop open style={{zIndex: 9999, backgroundColor:\"rgb(0 0 0 / 70%)\"}} >\r\n                    <span style={{ alignItems: \"center\", display: \"flex\",  fontSize: \"larger\", flexDirection:\"column\"}}>\r\n                    <CircularProgress color=\"secondary\" />\r\n                    <span style={{marginTop: 10, color: \"#e6e6e6\"}}>{this.state.message}</span>\r\n                    </span>\r\n                </Backdrop>\r\n    );\r\n    }\r\n}\r\n\r\nexport default WaitingProgress;","import React from 'react';\r\nimport {BrowserRouter, Router, Link} from 'react-router-dom';\r\nimport ReactDOM from 'react-dom';\r\nimport {createMuiTheme, makeStyles, MuiThemeProvider} from '@material-ui/core/styles';\r\nimport AppContext from './AppContext'\r\nimport {\r\n    AppBar, Hidden, BottomNavigation, Box, Button, Paper,\r\n    Container, Dialog, MenuList, MenuItem, FormLabel,\r\n    DialogActions, DialogContent,DialogTitle,\r\n    Grid, List, ListItem, Typography, Drawer, ListItemIcon, ListItemText, Divider\r\n} from '@material-ui/core';\r\nimport Cart from './components/service/Cart.js'\r\nimport Site from './components/service/Site.js'\r\nimport Toast from './components/Toast'\r\nimport './App.css';\r\nimport BottomBar from \"./components/BottomBar\";\r\nimport CartDialog from \"./components/CartDialog\";\r\nimport DeliveryDialog from \"./components/DeliveryDialog\";\r\nimport RegisterCustomer from \"./components/RegisterCustomer\";\r\nimport LoginDialog from \"./components/LoginDialog\";\r\nimport ProfileDialog from \"./components/ProfileDialog\";\r\nimport MyAppBar from \"./components/MyAppBar\";\r\nimport PaymentDialog from \"./components/PaymentDialog\";\r\nimport FoodOptionsDialog from \"./components/FoodOptionsDialog\";\r\nimport OfferOptionsDialog from \"./components/OfferOptionsDialog\";\r\nimport InboxIcon from \"@material-ui/icons/Inbox\";\r\nimport MailIcon from \"@material-ui/icons/Mail\";\r\nimport Util from \"./components/service/Util\";\r\nimport LeftDrawer from \"./components/LeftDrawer\";\r\nimport OrderHistoryDialog from \"./components/OrderHistoryDialog\";\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport TwitterIcon from '@material-ui/icons/Twitter';\r\nimport YouTubeIcon from '@material-ui/icons/YouTube';\r\nimport ForgotPassDialog from \"./components/ForgotPassDialog\";\r\nimport MessageBox from \"./components/MessageBox\";\r\nimport WaitingProgress from \"./components/WaitingProgress\";\r\n\r\nconst themeLight = createMuiTheme({\r\n    type: 'light',\r\n    palette: {\r\n        error: {\r\n            main: \"#ff604f\"\r\n        }\r\n    }\r\n});\r\nconst themeDark = createMuiTheme({\r\n    type: 'dark',\r\n\r\n});\r\nconst useStyles = makeStyles((theme) => ({\r\n    toolbar: {\r\n        flexGrow: 1,\r\n        color: 'white',\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n}));\r\n\r\nclass App extends React.Component {\r\n    user = {}\r\n    classes = {};\r\n    constructor(props) {\r\n        super(props);\r\n        AppContext.app = this;\r\n        this.state = {\r\n            fatalError: undefined,\r\n        };\r\n        this.classes = useStyles;\r\n    }\r\n\r\n    reload(){\r\n        window.location.reload();\r\n    }\r\n    componentDidMount() {\r\n        //Site.instance.init();\r\n        Site.instance.siteSubject.subscribe(()=>{\r\n            Site.instance.addPaypalScript()\r\n            this.setState({site: Site.instance.site})\r\n        })\r\n        Site.instance.fatalErrorSubject.subscribe((e)=>{\r\n            this.setState({fatalError: e});\r\n        })\r\n        //Site.instance.fetchSiteData();\r\n\r\n    }\r\n\r\n    componentWillMount() {\r\n    }\r\n\r\n    render() {\r\n        let site = Site.instance.site;\r\n        return (\r\n                <BrowserRouter>\r\n                    <MuiThemeProvider theme={site && site.appTheme === 'dark' ? themeDark : themeLight}>\r\n                        <div id=\"mainContainer\" style={{position:\"fixed\",top:0, left:0, width:\"100%\", height:'100vh',backgroundSize: \"cover\",\r\n                            backgroundPosition: \"center\",\r\n                            backgroundColor:\"#555555\",\r\n                            zIndex: -9999\r\n                        }}></div>\r\n                        <Container  style={{padding: \"0\",\r\n                            minHeight: \"100%\",\r\n                            height: \"auto !important\",\r\n                            margin: \"0 auto -142px\",\r\n                            maxWidth: '1224px'\r\n                        }} >\r\n                                {\r\n                                    this.state.fatalError &&\r\n                                    <Dialog open={true}>\r\n                                        <DialogTitle>\r\n                                            Error\r\n                                        </DialogTitle>\r\n                                        <DialogContent>\r\n                                                <Typography component={\"h5\"} style={{  textAlign: \"center\"}}>\r\n                                                    {this.state.fatalError}\r\n                                                </Typography>\r\n                                        </DialogContent>\r\n                                        <DialogActions>\r\n                                            <Button color=\"primary\" onClick={()=>{\r\n                                                this.setState({fatalError: null})\r\n                                            }} >Cancel</Button>\r\n                                            <Button color=\"primary\" onClick={()=>{\r\n                                                this.reload();\r\n                                            }} >Reload</Button>\r\n\r\n                                        </DialogActions>\r\n                                    </Dialog>\r\n\r\n                                }\r\n{/*\r\n                                    <MyAppBar/>\r\n*/}\r\n                                <RegisterCustomer />\r\n\r\n                                <MessageBox/>\r\n                                <WaitingProgress/>\r\n                                <Toast/>\r\n                            <div style={{height:142}}></div>\r\n                        </Container>\r\n                        {false &&\r\n                        <div style={{\r\n                            height1: 142,\r\n                            minHeight: 142,\r\n                            width: '100%',\r\n                            backgroundColor: \"rgb(77 77 77 / 51%)\",\r\n                            zIndex: 9999\r\n                        }} className=\"footer\">\r\n                            <Grid item xs={12}\r\n                                  style={{maxWidth: '1224px', margin: \"0 auto\", padding: 15, textAlign: \"center\"}}>\r\n                                <Typography style={{fontWeight: \"bold\", color: \"white\"}}>\r\n                                    Commander VPN\r\n                                </Typography>\r\n                                <div style={{color: \"white\"}}></div>\r\n                                <Link href=\"#\" to=\"#\" onClick={() => {\r\n                                    Site.instance.showMessageBox('', \"Terms & Conditions\", \"\")\r\n                                }} color=\"white\">\r\n                                    Terms and Conditions\r\n                                </Link><span style={{margin: 8, color: \"white\"}}>•</span>\r\n                                <Link href=\"#\" to=\"#\" onClick={() => {\r\n                                    Site.instance.showMessageBox('', \"About Us\", \"\")\r\n                                }} color=\"white\">\r\n                                    About Us\r\n                                </Link>\r\n                                <div style={{color: \"white\"}} onClick={() => {\r\n                                    Site.instance.showMessageBox(\"Coming soon!\", \"Message\", \"\")\r\n                                }\r\n                                }>\r\n                                    Follow us\r\n                                    <FacebookIcon/> <TwitterIcon/> <YouTubeIcon/>\r\n                                </div>\r\n\r\n                                <div style={{color: \"dimgray\", fontSize: \"12px\"}}>\r\n                                    <a href=\"https://commandervpn.github.io\" target=\"_blank\">Powered by CommanderVPN</a>\r\n                                </div>\r\n                            </Grid>\r\n                        </div>\r\n                        }\r\n{/*\r\n                        <Hidden mdUp>\r\n\r\n                        <BottomBar />\r\n\r\n                        </Hidden>\r\n*/}\r\n                    </MuiThemeProvider>\r\n                </BrowserRouter>\r\n        );\r\n    }\r\n}\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(\n    <App />\n    ,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}